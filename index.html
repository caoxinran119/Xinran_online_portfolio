<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cao Xinran | Digital Media Artist</title>
    
    
    <style>
        /* --- CSS Variables --- */
        :root {
            --bg-color: #0a0a0a;
            --bg-secondary: #141414;
            --text-color: #e6e6e6;
            --text-muted: #888888;
            --border-color: #333333;
            --accent-color: #ffffff;
            
            --font-serif: 'Arial', Helvetica, sans-serif; /* Changed to Arial */
            --font-sans: 'Arial', Helvetica, sans-serif; /* Changed to Arial */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-serif);
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        /* --- ä¼˜åŒ–åçš„: Main Background Image Container (å®ç°æ·¡å…¥æ·¡å‡ºè½¬åœº) --- */
        .main-bg-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            z-index: 0; 
            /* è°ƒæ•´ 1/3ï¼šé Home é¡µé¢çš„é»˜è®¤/åŸºç¡€é€æ˜åº¦æå‡åˆ° 0.25 */
            opacity: 0.25; 
            /* è°ƒæ•´ 2/3ï¼šé™ä½é»˜è®¤æ»¤é•œå¼ºåº¦ï¼Œä½¿å›¾ç‰‡æ›´å®¹æ˜“è¢«çœ‹åˆ° */
            filter: grayscale(50%) brightness(0.7); 
            /* å…³é”®ï¼šåªå¯¹ opacity å’Œ filter è¿›è¡Œè¿‡æ¸¡ï¼Œæ—¶é—´è®¾ç½®ä¸º 0.5s */
            transition: opacity 0.5s ease, filter 0.5s ease, background-image 0s;
        }

        /* NEW: Home é¡µé¢æ›´äº®çš„èƒŒæ™¯æ ·å¼ */
        .home-bg-filter {
            /* æé«˜é€æ˜åº¦ï¼Œä½¿å›¾ç‰‡æ›´å¯è§ */
            opacity: 0.8 !important; /* Home é¡µé¢ä½¿ç”¨æ›´é«˜çš„é€æ˜åº¦ */
            /* é™ä½ç°åº¦å’Œäº®åº¦ï¼Œä½¿å›¾ç‰‡é¢œè‰²å’Œç»†èŠ‚æ›´æ¸…æ™° */
            filter: grayscale(30%) brightness(0.7) !important; 
        }
        
        /* --- Noise Overlay (å·²ç§»é™¤) --- */
        .noise-overlay {
            display: none; /* ç§»é™¤å™ªç‚¹è¦†ç›–å±‚ */
        }

        /* --- Typography --- */
        h1, h2, h3 {
            font-weight: 300;
            color: #fff;
        }

        h2 {
            font-family: var(--font-sans);
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }
        
        /* Secondary text style for English bodies/captions */
        .en-text, .project-info span, .feed-type {
            font-family: var(--font-sans);
            color: #999;
            font-weight: 300;
            font-size: 1rem;
        }
        
        .p-serif {
            font-size: 1.2rem;
            font-weight: 300;
            color: #cccccc;
        }

        a {
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
        }

        a:hover {
            color: var(--text-color);
            opacity: 1;
        }
        
        /* Hide content until JS is loaded */
        #content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        #content.loaded {
            opacity: 1;
        }

        /* --- Navigation --- */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 2rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: linear-gradient(to bottom, rgba(10,10,10,0.95) 0%, rgba(10,10,10,0) 100%);
            backdrop-filter: blur(2px);
        }

        .logo {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-style: italic;
            letter-spacing: 0.02em;
            white-space: nowrap;
            z-index: 101;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            font-family: var(--font-sans);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }
        
        .nav-links button {
            background: none;
            border: none;
            cursor: pointer;
            color: inherit;
            padding: 0;
            transition: color 0.3s ease;
        }
        
        .nav-links button:hover {
            color: var(--text-color);
        }

        .nav-highlight {
            color: #fff !important;
            border-bottom: 1px solid rgba(255,255,255,0.3);
        }

        /* --- Animation Utilities --- */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s ease, transform 1.2s ease;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Section Layout --- */
        section {
            min-height: 100vh;
            padding: 8rem 3rem;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .section-header {
            margin-bottom: 4rem;
            border-top: 1px solid var(--border-color);
            padding-top: 1rem;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        /* --- HOME --- */
        #home {
            justify-content: center;
            align-items: center;
            overflow: hidden;
            min-height: 90vh;
        }

        .light-blur {
            position: absolute;
            width: 50vw;
            height: 50vw;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.07) 0%, rgba(10, 10, 10, 0) 70%);
            filter: blur(80px);
            animation: breathe 12s infinite alternate ease-in-out;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes breathe {
            0% { transform: translate(-10%, -10%) scale(1); opacity: 0.4; }
            100% { transform: translate(10%, 5%) scale(1.2); opacity: 0.7; }
        }

        .hero-text {
            text-align: center;
            max-width: 800px;
            z-index: 1;
        }

        .hero-text h1 {
            font-family: var(--font-serif);
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 300;
            line-height: 1.2;
            letter-spacing: -0.01em;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 3rem;
            font-family: var(--font-sans);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            opacity: 0.5;
            animation: fadeInOut 3s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }

        /* --- WORKS (New Split View) --- */
        #works {
            min-height: 100vh;
            align-items: center; /* Center the works-container */
        }

        .works-container {
            display: flex;
            width: 100%;
            max-width: 1200px;  
            margin: 0 auto; 
            gap: 5rem;
        }

        .works-index {
            flex: 0 0 40%; /* Left column takes 40% of the space */
            border-right: 1px solid var(--border-color);
            padding-right: 3rem;
        }

        .works-index button {
            display: block;
            width: 100%;
            background: none;
            border: none;
            padding: 1.5rem 0;
            cursor: pointer;
            text-align: left;
            border-top: 1px solid rgba(255,255,255,0.05);
            transition: color 1s ease, background-color 1s ease;
        }

        .works-index button:first-child {
            border-top: none; /* Remove top border for the first item */
        }

        .works-index button.active-project {
            color: var(--text-color);
            background-color: rgba(255,255,255,0.01);
        }
        
        /* Highlight on hover */
        .works-index button:hover:not(.active-project) {
            color: var(--text-color);
        }

        .works-index-title {
            font-family: var(--font-serif);
            font-size: 1.8rem;
            /* REMOVED: font-style: italic; */
            font-weight: 400; /* Adjusted weight for clarity */
            color: var(--text-muted);
            transition: color 0.3s ease;
        }
        .works-index button.active-project .works-index-title {
            color: var(--text-color);
        }

        .works-preview {
            flex: 1; /* Right column takes the remaining space */
            padding-left: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            min-height: 500px; /* Ensure preview area doesn't collapse */
            justify-content: center;
        }

        .preview-content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .preview-content.show {
            opacity: 1;
        }

        .preview-meta {
            font-family: var(--font-sans);
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .preview-caption {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            /* REMOVED: font-style: italic; */
            font-weight: 400; /* Adjusted weight for clarity */
            color: var(--text-color);
            margin-bottom: 1.5rem;
        }

        .preview-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            overflow: hidden; /* To contain the image */
        }
        /* Make image fill the thumbnail container */
        .preview-thumbnail img, .detail-visual img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        /* --- PROJECT DETAIL / FRAGMENT DETAIL / TEXT VIEW --- */
        #project-detail, #fragment-detail, #fragment-section-view {
            max-width: 1000px;
            margin: 0 auto;
        }
        .detail-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        .detail-header h3 {
            font-size: 3rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
            /* REMOVED: font-style: italic; */
            font-weight: 400; /* Adjusted weight for clarity */
        }
        
        /* New style for the actual poem/text */
        .text-content-body {
            max-width: 65ch;
            font-family: var(--font-serif);
            font-size: 1.2rem;
            font-weight: 300;
            line-height: 1.8; /* Slightly adjusted line height for poetry/prose */
            white-space: pre-wrap; /* Preserve line breaks and spaces */
        }
        .text-content-body pre {
            font-family: var(--font-serif);
            font-size: 1.2rem;
            font-weight: 300;
            line-height: 1.8;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            white-space: pre-wrap; /* Ensure text wraps */
        }

        .detail-body {
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }
        .detail-description {
            max-width: 70ch;
        }
        .detail-visual {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: #1a1a1a;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            overflow: hidden; /* To contain the image */
        }
        
        .back-button {
            font-family: var(--font-sans);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 3rem;
            display: inline-block;
            cursor: pointer;
            transition: color 0.3s ease;
            background: none;
            border: none;
            padding: 0;
            text-align: left;
        }
        .back-button:hover {
            color: var(--text-color);
        }
        
        /* NEW: Directory list for Journal Details */
        .journal-directory {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .directory-item {
            font-family: var(--font-sans);
            font-size: 1rem;
            color: var(--text-color);
            padding: 1rem;
            border: 1px solid var(--border-color);
            text-align: left;
            background-color: var(--bg-secondary);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .directory-item:hover {
            background-color: #2a2a2a;
            transform: translateX(5px);
        }
        /* End NEW */


        /* --- FEED --- */
        #feed {
            align-items: center;
        }
        
        .feed-container {
            max-width: 700px;
            width: 100%;
        }

        .feed-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* Default to 3 columns */
            gap: 2rem;
            width: 100%;
        }

        .feed-post {
            background-color: var(--bg-secondary);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 1.5rem;
            margin-bottom: 0; /* Removed vertical margin for grid layout */
            transition: background-color 0.3s ease;
        }
        
        .feed-post:hover {
            background-color: #1a1a1a;
        }

        .feed-header {
            margin-bottom: 1rem;
        }
        
        /* CSS for the image container in feed posts */
        .feed-visual-placeholder {
            width: 100%;
            aspect-ratio: 4/3;
            background-color: #0a0a0a;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            border-radius: 2px;
            overflow: hidden; /* Ensure image fits */
        }
        /* New rule for images inside the placeholder */
        .feed-visual-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* --- JOURNAL (Index & Detail styles) --- */
        #writing {
            align-items: center;
        }

        .journal-container {
            max-width: 65ch;
            width: 100%;
        }

        /* NEW: Style for the clickable index card */
        .journal-entry-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 2rem 0;
            margin-bottom: 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            background: none;
            border-top: none;
            border-left: none;
            border-right: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .journal-entry-card:hover {
            background-color: rgba(255,255,255,0.02);
        }
        
        .entry-title-wrap {
            text-align: left;
        }
        
        .entry-date {
            font-family: var(--font-sans);
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 0.5rem;
            display: block;
        }

        .entry-title {
            font-family: var(--font-serif);
            font-size: 1.8rem;
            margin: 0;
            color: var(--text-color);
            line-height: 1.2;
            text-align: left;
            /* REMOVED: font-style: italic; */
            font-weight: 400; /* Adjusted weight for clarity */
        }

        .read-more {
            font-family: var(--font-sans);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: inline-block;
            color: var(--text-muted);
            white-space: nowrap;
        }
        .read-more:hover {
            color: var(--text-color);
        }


        /* --- STORE --- */
        #store {
            background-color: var(--bg-secondary);
        }

        .store-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3rem;
            width: 100%;
        }
        
        .product-card {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .product-thumb {   
            width: 100%;
            aspect-ratio: 4/5;
            background-color: #2a2a2a;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .product-thumb span {
            color: rgba(255, 255, 255, 0.2);
            font-family: var(--font-sans);
        }
        /* New rule for images inside the product thumb */
        .product-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .product-info {
            padding-top: 0.5rem;
        }
        
        .product-info h3 {
            font-family: var(--font-sans);
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.2rem;
            color: var(--text-color);
        }
        
        .product-info p {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .product-price {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 400;
        }

        .buy-button {
            font-family: var(--font-sans);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-color);
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            background-color: transparent;
            cursor: pointer;
            align-self: flex-end;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .buy-button:hover {
            background-color: rgba(255,255,255,0.1);
            border-color: var(--text-color);
        }

        /* --- ABOUT --- */
        #about {
            max-width: 1200px;
            margin: 0 auto;
            min-height: 80vh;
        }
        
        .about-inner {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
        }

        .about-content {
            display: flex;
            gap: 5rem;
            align-items: flex-start;
        }

        .artist-portrait {
            flex: 0 0 350px;
            height: 450px;
            background-color: #1a1a1a;
            overflow: hidden;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .statement-text {
            flex: 1;
        }
        
        .statement-text h3 {
            font-family: var(--font-serif);
            font-size: 2rem;
            font-style: italic;
            margin-bottom: 1.5rem;
        }
        
        .statement-text p {
            margin-bottom: 1.5rem;
            max-width: 70ch;
        }

        .contact-info {
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            margin-top: 2rem;
        }
        
        .social-links a {
            font-family: var(--font-sans);
            font-size: 0.9rem;
            margin-right: 1.5rem;
            color: var(--text-muted);
        }

        /* --- Responsive Design (ä¿æŒä¸å˜) --- */
        @media (max-width: 1024px) {
            .works-container {
                flex-direction: column;
                gap: 3rem;
            }
            .works-index {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                padding-right: 0;
                padding-bottom: 3rem;
            }
            .works-index button {
                padding: 1rem 0;
            }
            .works-preview {
                padding-left: 0;
                min-height: 200px;
            }
            .gallery-grid {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
            .store-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .feed-grid {
                grid-template-columns: repeat(2, 1fr); /* 2 columns for tablet */
            }
            .about-content {
                flex-direction: column;
                gap: 2rem;
            }
            .artist-portrait {
                width: 100%;
                height: 400px;
                flex: none;
            }
        }
        
        @media (max-width: 768px) {
            nav {
                padding: 1rem 1.5rem;
            }
            .nav-links {
                gap: 1rem;
                font-size: 0.7rem;
            }
            section {
                padding: 5rem 1.5rem;
            }
            .hero-text h1 {
                font-size: 1.8rem;
            }
            .store-grid, .feed-grid {
                grid-template-columns: 1fr; /* 1 column for mobile */
            }
        }
    </style>
</head>
<body class="is-loading">

    <div id="main-background" class="main-bg-image"></div>

    <nav>
        <div class="logo">Cao Xinran</div>
        <div class="nav-links">
            <button onclick="navigate('home')">Home</button>
            <button onclick="navigate('works')">Works</button>
            <button onclick="navigate('feed')">Field Notes</button>
            <button onclick="navigate('writing')">Writing</button>
            <button onclick="navigate('store')">Store</button>
            <button onclick="navigate('about')">About</button>
        </div>
    </nav>

    <main id="content">
        </main>

    <footer>
        &copy; Cao Xinran. All rights reserved.
    </footer>

    <script>
        // --- Global variables for background cycling ---
        let homeBackgroundCycleInterval = null;
        let currentHomeBgIndex = 0;
        
        // --- Core Variables Initialization ---
        const contentDiv = document.getElementById('content');
        const bgDiv = document.getElementById('main-background'); // è·å–æ–°å¢çš„èƒŒæ™¯å›¾å…ƒç´ 
        let currentPage = 'home';

        // =======================================================
        // ========== 1. èƒŒæ™¯å›¾è·¯å¾„é…ç½® (Page Backgrounds) ==========
        // =======================================================
        
        // æ›¿æ¢ä»¥ä¸‹è·¯å¾„ä¸ºæ‚¨æ”¾åœ¨ caoxinranphoto/ æ–‡ä»¶å¤¹ä¸­çš„å®é™…èƒŒæ™¯å›¾æ–‡ä»¶å
        const backgroundImages = {
            // ğŸš¨ è·¯å¾„å·²ä¿®æ­£ä¸ºç›¸å¯¹è·¯å¾„ï¼Œç”¨äº Live Server è°ƒè¯•å’Œ Pages éƒ¨ç½²
            'home': [
                'images/FLAG_exh7.jpg',    
                'images/FF_3.jpg',    
                'images/MN_stand_by_the_river.png',    
                'images/NEO_3.jpg',    
                'images/MN_riverside.png'     
            ],
            // å…¶ä»–é¡µé¢çš„å•å¼ èƒŒæ™¯å›¾
            // è·¯å¾„å·²å…¨éƒ¨ä¿®æ­£ä¸º images/ æ–‡ä»¶å¤¹ (å‡è®¾ bg-feed/bg-store ä¹Ÿåœ¨ images æ–‡ä»¶å¤¹ä¸­)
            'works': 'images/back.png',    
            'feed': 'images/bg-feed.jpg',    
            'writing': 'images/backforwriting.jpg', 
            'store': 'images/bg-store.jpg',    
            'about': 'images/Xinran_portrait.jpg',    
        };

        // =======================================================
        // ========== 2. ä½œå“æ•°æ®åŠå›¾ç‰‡è·¯å¾„ (Project Data) ==========
        // =======================================================
        
        // ** è·¯å¾„å·²ä¿®æ­£ä¸ºç›¸å¯¹è·¯å¾„
        const projectsData = [
            { 
                id: "project-01", 
                title: "The Excavator", 
                caption: "The Excavator", 
                description: "This work traces my return to the vacant lot where my elementary school once stood, rebuilding its vanished architecture through an AR excavator that digs up structures no longer there. æˆ‘çš„å°å­¦å·²ç»å˜æˆåºŸå¢Ÿã€‚åœ¨å®ƒæ›¾ç»æ‰€åœ¨çš„ç©ºåœ°ä¸Š,ä¸€å°æŒ–æ˜æœºæ­£åœ¨æŒ–æ˜å·²ç»æ¶ˆå¤±çš„å»ºç­‘ã€‚", 
                type: "Video / AR Installation", 
                year: "2025",
                // Works ç´¢å¼•é¡µçš„é¢„è§ˆå›¾ (é¼ æ ‡æ‚¬åœæ—¶å³ä¾§æ˜¾ç¤º)
                previewImagePath: "images/FF_2.jpg", 
                // ä½œå“è¯¦æƒ…é¡µçš„é…å›¾
                detailVisuals: [
                    { label: "Still 1: Dust Motes", path: "images/FF_3.jpg" }, 
                    { label: "Still 1: Dust Motes", path: "images/FF_2.jpg" }, 
                    { label: "Still 2: Empty Hallway", path: "images/FF_4.jpg" } 
                ],
                // ä½œå“è¯¦æƒ…é¡µçš„èƒŒæ™¯å›¾
                backgroundImage: 'images/FF_1.png', 
                videoLink: "https://youtu.be/CEncCsvKKGw?si=lkHh8o9Xpr9zMnDd" 
            },
            { 
                id: "project-02", 
                title: "NO ONE IS ALLOWED IN", 
                caption: "NO ONE IS ALLOWED IN", 
                description: "Within the inaccessible space, we created a scenario: whenever two individuals meet, they must utter the four characters é—²äººå…è¿› (XiÃ¡n RÃ©n Mian JÃ¬n). è¿™ä¸ªç©ºé—´ä¸ºæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªæƒ…å¢ƒ, è€Œè§„åˆ™ç”±æˆ‘ä»¬æ‰§è¡Œ: æ¯å½“ä¸¤äººç›¸é‡, ä»–ä»¬å¿…é¡»è¯´å‡ºâ€œé—²äººå…è¿›â€å››ä¸ªå­—ã€‚", 
                type: "Performance Art", 
                year: "2024",
                previewImagePath: "images/NEO_1.png", 
                detailVisuals: [
                    { label: "Photo 1: Backs to each other", path: "images/NEO_2.png" }, 
                    { label: "Photo 1: Backs to each other", path: "images/NEO_9.jpg" }, 
                    { label: "Photo 1: Backs to each other", path: "images/NEO_5.jpg" }, 
                    { label: "Photo 2: Distance and Shadow", path: "images/NEO_4.jpg" } 
                ],
                backgroundImage: 'images/NEO_7.png', 
                videoLink: "https://youtu.be/lQHwDO1qSmk?si=oz4Dy6zbBklsKn3j"
            },
            { 
                id: "project-03", 
                title: "The Squad Who Guard The Flag ", 
                caption: "The Squad Who Guard The Flag", 
                description: "Ten years ago in the Forbidden City, I filmed a blurred fragment on a DV camera, where the only thing that remains clear is the guide's voice repeating the words: the flag guard. åå¹´å‰æˆ‘åœ¨æ•…å®«æ¸¸è§ˆæ—¶, æ‰‹æŒçš„DVæ‘„åƒæœºå¶ç„¶æ•æ‰åˆ°çš„æ¨¡ç³Šç”»é¢å’Œå¯¼æ¸¸é‚£å¥â€œæŠ¤æ——é˜Ÿâ€, æˆä¸ºäº†æˆ‘è®°å¿†ä¸­çš„é”šç‚¹ã€‚å¦‚æœä¸–ç•Œæ˜¯ç‰©è´¨ç»„æˆçš„ç»“æ„ä½“ï¼Œé‚£ä¹ˆå®ƒæ—©å·²åŒ–ä½œåºŸå¢Ÿã€‚ä½†æ˜¯å½±åƒå»¶ç¼“äº†è¡°è´¥ã€‚å°±åƒæ˜¯ä¸€ä¸ªè¢«æ—¶é—´å›°ä½çš„ä¸–ç•Œã€‚", 
                type: "Experimental Film", 
                year: "2023-Ongoing",
                previewImagePath: "images/FLAG_exh3.jpg", 
                detailVisuals: [
                    { label: "Object View: Resin Cast", path: "images/FLAG_walking.jpg" }, 
                    { label: "Text Detail: Embedded Fragment", path: "images/FLAG_whisle.png" } 
                ],
                backgroundImage: 'images/FLAG_explosion.png', 
                videoLink: "https://youtu.be/F03LG0NyYLU?si=e4i-BwYNkWulletd"
            },
            { 
                id: "project-04", 
                title: "RiverÂ·TrainÂ·Flame", 
                caption: "RiverÂ·TrainÂ·Flame",
                description: "Centered on a fictional encounter between Chinese poet Hai Zi and American musician Kurt Cobain, this work begins at the moment of their suicides and follows the imagined dialogue that unfolds between them across time, space, and culture. è¿™éƒ¨ä½œå“ä»¥ä¸­å›½è¯—äººæµ·å­å’Œç¾å›½éŸ³ä¹å®¶KurtÂ·Cobainçš„ä¸€æ¬¡è™šæ„ç›¸é‡ä¸ºä¸­å¿ƒ, ä»ä»–ä»¬è‡ªæ€çš„é‚£ä¸€åˆ»å¼€å§‹, æ²¿ç€ä»–ä»¬ä¹‹é—´è·¨è¶Šæ—¶é—´ã€ç©ºé—´å’Œæ–‡åŒ–çš„æƒ³è±¡å¯¹è¯å±•å¼€ã€‚", 
                type: "Video", 
                year: "2024",
                previewImagePath: "images/MN_train_river_.png", 
                detailVisuals: [
                    { label: "Screen Capture: Digital Etching", path: "images/MN_kurtcobain_empty.png" }, 
                    { label: "Screen Capture: Digital Etching", path: "images/MN_Dionysus.png" }, 
                    { label: "Screen Capture: Digital Etching", path: "images/MN_stand_by_the_river.png" }, 
                    { label: "Text Fragment: Overheard Line", path: "images/MN_windowview.png" } 
                ],
                backgroundImage: 'images/MN_railway.png', 
                videoLink: "https://youtu.be/Fc115SGZ9Tk?si=_KW2m-9dcyTFXE7W"
            },
            { 
                id: "project-05", 
                title: "The Lung of Algorithms", 
                caption: "The Lung of Algorithms", 
                description: "An interactive video based on processing. It originated from a chest X-ray of mine. That was the first time I truly faced my own lungs. Subsequently, I transformed this medical image into a data stream and visual images, enabling the internal state of the body to be re-observed and recreated in the digital dimension. ä¸€ä¸ªåŸºäºprocessingçš„äº¤äº’è§†é¢‘ã€‚æºäºæˆ‘ä¸€æ¬¡èƒ¸éƒ¨Xå…‰æ£€æŸ¥, é‚£æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœŸæ­£ç›´é¢è‡ªå·±çš„è‚ºéƒ¨ã€‚éšå, æˆ‘å°†è¿™ä»½åŒ»å­¦å½±åƒè½¬åŒ–ä¸ºæ•°æ®æµä¸å¯è§†åŒ–å½±åƒ, ä½¿èº«ä½“çš„å†…éƒ¨çŠ¶æ€åœ¨æ•°å­—ç»´åº¦ä¸­è¢«é‡æ–°è§‚çœ‹ä¸å†é€ ã€‚", 
                type: "Interactive Video", 
                year: "2025",
                previewImagePath: "images/The Lung of Algorithms_preview.png", 
                detailVisuals: [
                    { label: "Diagram: System Architecture", path: "images/The Lung of Algorithms_total.png" }, 
                    { label: "Still: Mechanical Element", path: "images/The Lung of Algorithms_black.png" }
                ],
                backgroundImage: 'images/The Lung of Algorithms_Xray.jpg' 
            },
            { 
                id: "project-06", 
                title: "To Perceive Thus", 
                caption: "To Perceive Thus", 
                description: "Fire, rain, thunder, and other sounds of nature begin to collapse as someone murmurs indistinctly the things that leap into their mind. A grand ritual unfolds. ç«ã€é›¨ã€é›·å’Œå…¶ä»–è‡ªç„¶çš„å£°éŸ³å¼€å§‹æ¶ˆå¤±ï¼Œå› ä¸ºæœ‰äººæ¨¡ç³Šåœ°å–ƒå–ƒè‡ªè¯­ç€è·³å…¥ä»–ä»¬è„‘æµ·ã€‚ä¸€åœºç››å¤§çš„ä»ªå¼å±•å¼€äº†ã€‚", 
                type: "Sound Dramaturgy / Experimental Sound", 
                year: "2023",
                previewImagePath: "images/EMSOUND_2.png", 
                detailVisuals: [
                    { label: "Print Detail A", path: "images/EMSOUND_1.png" }
                ],
                backgroundImage: 'images/EMSOUND_1.png',
                videoLink: "https://youtu.be/AYm8pYy8168?si=9PiO8BwgpkENOyUY"
            },
        ];
        

        // ** Log ç‰‡æ®µæ•°æ®ç»“æ„ (ä¿æŒä¸å˜) **
        const fragmentsData = [
            { 
                id: "fragment-01", 
                date: "2023-ongoing", 
                title: "Stories of Secondhand Smoke", 
                content: "Stories of Secondhand Smoke",
                sections: [
                    { 
                        title: "I. Goodbye, Bridge", 
                        content: `I don't want to drown in the downpour,
Endless yearning and reminiscence,
An incurable,
Self-abusive chronic illness,
Etching the shadow of the railing onto the stone,
Becoming a simple cage.
Has anyone said this?
It's safest suspended in the air.
Half a melted ruined bridge,
It fills me with regret,
But I've broken free
From the after-effects of mythological brainwashing.
This is another case of unfulfilled desire,
At least this year it can't be closed.
Ever-expanding inspiration
Leads to self-destruction in the process of explaining itself.
The ending slides into ambiguity.

Oh friend,
You don't understand a joy of mine
Called stopping short after a taste,
Tasteless,
Effortless.
No one cares which way I lean when I walk,
Nor what path I'll take with my eyes coveredâ€”
A circle to the left or to the right.

One day I'll walk onto this bridge without pressure,
And end my life on it.
Watching her appear in the middle of the bridge,
Then self-destruct.
At night, someone plays the erhu,
Singing
A fragmented song.

2023.8.23` 
                    },
                    { 
                        title: "II. Pacific Saury", 
                        content: `Eating a grilled Pacific saury at 3 AM alone
Is pretty satisfying.
Doing inappropriate things at inappropriate times
You'll get used to it.
Already used to it.

After many years,
Closing my eyes, reminiscing,
Though my heart has long questioned
Countless "what ifs."
An overly precocious mind,
Like the skin,
Feels freedom first,
Moves towards decay first.

ClichÃ©s are used comfortably,
Few poetic lines remain,
Weathered, etched,
Increasingly like nonsense.
Transparent plastic bags whistle overhead,
Rustling, lighting fires on the river beach.
Together on the ruins,

The moon we sunbathed under, the songs we sang,
The boasts we made, the wishes we wished,
And so much more.

2024.4.14`
                    },
                    { 
                        title: "III. Loose", 
                        content: `The wind makes bones rustle,

Loose,
The old bicycle gasps for air,
Rust stains on trouser legs.
Necessarily,
A season of growth,
Everything is invading,
Re-occupying what was original.
Just can't bear to part with the long-hoarded
Old spring, just spring.
A fondness for the indescribable arises,
Lingering affection, unresolved,
An undercurrent's fierce surge.

2025.4.7`
                    }
                ]
            },
            { 
                id: "fragment-02", 
                date: "2022-ongoing", 
                title: "On Continuous Motion", 
                content: "The river keeps its promises, always moving away from where it began. I try to be more like the river, less like the stone that holds the bank in place. But gravity, the mundane pull of the known, makes a quiet anchor of the heart. To wander is simply to choose the current.",
                sections: [
                    { 
                        title: "I. Tushko", 
                        content: `Music as a drug
Has a long history.
Cool breeze through the seaside blanket
Naturally came to an abrupt halt,
Unintentionally, yet intentionally.
Before the second baptism,
I should learn to dance.
Pin up my hair, bare my shoulders,
Look in the full-length mirror
With a proud demeanor.
Transform into an elephant.
The room is utterly empty.
One hour and forty minutes
To think of many things.
When the signal of rebirth from ardent thoughts fades,
The rambling of confession
Cooled and made into biscuits to eat.
Sympathy for the elephant,
Or a craving for LSD?

2022.12.28 22:59` 
                    },
                    { 
                        title: "II. The Sun Emerges From the Rubble Pile", 
                        content: `The sun emerges from the rubble pile,
Breathing out a cloud of white.
Distant things
Are now forever out of sight.
Where in the field's center
Do the ashes burn?
It's unknown to me.
A bird above my head
Has circled three times.
I sit with my back to the sun,
Then turn and walk forward.

2024.1.30` 
                    }
                ]
            },
            { 
                id: "fragment-03", 
                date: "2023-ongoing", 
                title: "An Inventory of Blue", 
                content: "Not the blue of the sky, nor the sea, but the blue found in shadowsâ€”under the lip of a chipped ceramic cup, or the vein running across a tired wrist. It is the color of potential and quiet exhaustion, a necessary depth against the bright, insistent clamor of the world.",
                sections: [
                    { 
                        title: "I. Crocodile", 
                        content: `But all I wanted then was to climb that chimney,
Sit in the winter sun,
And swing my feet.
No one asked me a word,
Nor would I speak.
Holding a foam box of lava cakes,
Sitting on the playground,
Looking for a place to disappear.
Shadows grow tall, run.
Crocodile,
Will it also on an afternoon
Lie by the river, sunbathing,
Carefully dissecting its prey's pain?
Surely one time it will be sincere.
Then gracefully crawl into the water,
Waiting for the next.

2023.1.4` 
                    },
                    { 
                        title: "II. Releasing a Kite", 
                        content: `Releasing a kite
Before sunset,
On a still discernible
Island.
Following the rhythm of a jingle,
The sun sets from the left of the sea.
Octopuses wave their colorful tentacles,
Ten thousand kinds of blue
Welcome ships arriving, departing.
What do windmills say?
Standing freely,
Asking no one's name,
Facing all day long
Snow-capped mountains, shimmering,
Wrapped in transparent silk.
Clouds will disperse,
No matter how beautiful they once were.

2024.7.11` 
                    },
                    { 
                        title: "III. Confessional", 
                        content: `We must be light enough to touch heaviness.
We must reach heaviness to feel lightness.
Selectively forget some dreams,
Lose contact with flocks of birds.

2025.4.7` 
                    }
                ]
            },
            { 
                id: "fragment-04", 
                date: "2022", 
                title: "The Unwritten Script", 
                content: "The city writes its own narrative on glass and pavement, a script we merely walk through. I tried to read the subtext of a traffic light changing, but found only the cold logic of repetition. The real story lies in the pause.",
                sections: [
                    { 
                        title: "Sphinx by The Sea", 
                        content: `The acquaintance of men and women was in one morning.

The man's friend asked him to meet him at the mall in the city center, and he arrived half an hour early to find that the mall was not open.

Man stands in front of the mall holding an umbrella, the city is cold and humid in winter, and gray as far as the eye can see.

The pigeons in the square are also gray.

He lifted the black nylon umbrella, and the rain was cool on his face.

He stood in front of the traffic light, bored watching the signal light turn from green to red and then to green. No one has ever stepped on a zebra crossing. He walked around the closed gate along the bulky building. The outer shell of the whole building is silver-white metal and tempered glass, which looks like a shell standing by the sea from a distance. It is opposite a bookstore. It is estimated that there are a lot of his books piled up inside.

The side door opened.

He walked smoothly into the side door to the quiet first floor of the mall. The modern design is angular, with two elevators standing in the east and west zones, and four van elevators hanging at the four corners. It's as empty as the palace of an ancient king, and as soon as you look up, you can see the light spilling from the semi-open-air glass roof. Light comes in through the glass curtain wall, dying the white tiled floor a touch of blue.

Suddenly, a sound of footsteps drew his attention to the elevator closest to him.

It was a woman in a long gray coat. Her hair was about an inch above her shoulders and she wore no jewelry.

She walked up the unpowered elevator steps. The movements are slow, arms outstretched, chin raised, as if to ascend to heaven to embrace God.

The man saw her appearance clearly through the reflection of the metal elevator.

- The facial features are plain and do not conform to the beginning of any kind of erotic encounter. However, such encounters are unique enough to write a story.

The man watched as this strange woman walked up the third floor, watched her figure weave through the long corridors, and finally disappeared in front of a store.

The woman runs a perfume shop.

Obviously, this shop did not have any business during the war years. In the same way, his books can't be sold.

At first, the conversation was polite , and soon the woman found that the man was too boredCome in to pass the time. However, anyway, the business is not good, no one comes to the door, and she also wants to find someone to talk to.

The man had never been in a perfume shop before. He's just a poor writer. To be honest, he has a bit of contempt for perfume and a bit of curiosity.

He has never liked perfumers, men and women. He has always advertised that beautiful things must be real and simple, like the art of ancient Greek times. Ever since he studied Greek in college, he has fallen uncontrollably into the cult of ancient Greek culture.

Women are noncommittal about men's opinions.

She's seen so many people of all stripes, many of whom are as prejudiced as men. It's just that those men always have women by their side. Their role in publicizing bias is to pay.

The man paused when the woman asked him what industry he was in, and then said that he was a writer, writing some novels for magazines and some poetry. A few books were published, but they didn't sell well.

The woman smiled, and then she told the man that the nature of their work was not much different.

The man asked her why. The woman told him that books or perfumes were just means of whitewashing and packaging vulgar cores.

No amount of perfume can hide the blood, and no amount of good books can eliminate human stupidity.

A group of people in suits and leather shoes sat at long tables, watching the world slowly become devastated.

As she said these words, the woman's head shook slightly, and her hair brushed her cheeks. The man had the urge to pin this damn hair behind her ear with a hairpin.

A man is not good at words, he is a writer rather than an orator.

When he was with her, he was always clumsy, and the symptoms of intermittent aphasia flared up when he looked at her. Maybe give him a pen and he can better express his opinion.

The woman's mind is sometimes radical, reminiscent of a steel beast whizzing over the city.

He asked her why, when she was in the elevator, she hugged the air with her hands in a gesture of mercy for the world, as if praying for the victims of war. And she always avoided the question. In fact, she doesn't believe in anything, including God.

The woman found a bed from the shop next doorBlankets that customers don't want.

On cold and cold winter days, sneak in the mall all night without anyone finding out. They hugged the blanket and said innocuous things. Again and again small talk made them quickly become more familiar with each other than the average person.

It was getting late.

He's coming.

They hid in blankets, surrounded by warm darkness. The woman rests her head on the man's shoulder and they tell each other their stories.

Wind, wind, endless wind. The woman said.

The sweet wind on the field as a child, it was dry and peaceful, softly passing between the arms. It passed through the blue-tiled and white-walled house, witnessing from outside the curtain that she was still asleep and was awakened by the scent of breakfast.

Women often go downstairs with sleepy eyes half open and wearing two socks of different colors. Usually one is white dotted on a blue background, and the other is orange striped.

The doorbell will ring in an hour. The wind rode with her from home to school, hidden in the sleeves of her tracksuit, bulging like a sail.

Women's long hair and bows flutter in the wind, shadows hide behind telephone poles, and watch puppies snore on the haystacks.

The man is talking about light. All kinds of light.

The reflection of sea lions' fur in the amusement park pond, the sunlight shining through the boulevard at three o'clock in the afternoon, the flashing of night flight aircraft signals. He told the woman that he had bought a three-color cup of ice cream in the freezer at the airport convenience store in the winter, and when he opened it, he found that it did not smell of chocolate. He was a middle school student at the time, obsessed with Thoreau's Walden.

The lights in the plane were warm and dim, but he was still cold. He asked the flight attendant for a blanket that looked like chocolate.

There is fire in their stories.

They talked about it with the same sense of fear and excitement.

Fear comes from the pain of destruction, and excitement comes from the joy of destruction.

The fire that the woman sees is blue. Not the bright blue of the flames on a gas stove, but the blue of the ink.

It could be the blue of the sea, the man thought, or the color of the blue ink he used to write - he had always been accustomed to writing in blue ink. His manuscripts were neatly bundled together and locked in a chest of drawers in the corner of his roomVillage.

The man said his flame could not see shapes, only sounds. It is like tens of thousands of concert halls playing symphonies, which are huge and noisy.

The woman said her flame was cold, and the man said his flame was hot.

Whatever their fire looks like, it's just as sad to remember. The fire of memories burns out, leaving only ashes, and there is no burning process, and there is no fear and excitement. No one will have a fear of white ashes.

The flames dance, the fire of men, the fire of women.

They were wrapped in blankets as warm as the sea and watched them burn from the air. They don't remember why they are sad.

There was a sudden silence between them, a warm dark silence.

In silence, the man said he remembered a year when his university hosted a celebration with champagne, fountains, Ionic marble columns.

And tuxedos, poetry, accordion, women say casually. Aren't all college parties like this?

Maybe we can unfold an imagination, the man said.

We used to dance the same dance at the same event at the same university, but your dance partner is not me, and my dance partner is not you.

We turned our backs to each other, circled three hundred and sixty degrees to the accompaniment of the violin, and then turned our backs again.

The woman asked him why he didn't arrange them as a dance partner.

In that case, he said, we would lose the motivation to pursue each other. Encounters that are too easy often lead to unsatisfactory endings.

A cruel romance, isn't it?

When he woke up, he took her to the exhibition hall next to the bookstore to see the paintings.

The pavilion is made up of long, narrow and curved corridors that cannot be seen as far as the eye can see.

They stopped and walked in the open corridors.

None of them are art lovers, just a lively watch. He stared at the woman for a long time in the dim and faint light of the pavilion. His gaze wandered from her short hair to her neck, to her shoulders, to her back, to her chest, to her waist, to her legs, to her ankles, to her feet.

She always wears a silver paperclip at the neckline of her shirt, she wears flat shoes, and she never wears perfume.

When I left the exhibition hall, it was raining heavily outside. The gray city fades to the pale on a rainy day.

Rain washingWash away all traces of depression and make them clearer. They walked in an overwhelming white. The woman's face blurred in the heavy rain, and the man was surprised to find that at this moment she became incomparably beautiful: her hair dripped with water, blending with her facial features into a hazy watercolor painting.

They clasped their fingers across empty crosswalks, through the parkland where pigeons once roosted, and through flashing traffic lights.

The city becomes a game of chess, and the chess players are so bad that nothing can stop them except the roar of wind and rain. The newsagents on the street were closed and they had no outside news.

All they know is that the war is not over.

The day before the New Year, half of the building opposite the man's house was blown down. The steel bars twisted abruptly in the humid air, and they protested to the surviving buildings.

The man got up and went to the bathroom to freshen up.

He realized that he had not felt the noise of the road, the crowd and the sound of all warm life for a long time.

The roar of the bombers at night tortured him almost mentally, and the frequent bouts of headaches were about to tear him apart.

But this day he felt light. He longed to escape this damn environment, to destroy, to touch the scars of the building and feel the heat of the gunfire, rather than to be imprisoned in this lifeless place.

The man took all his poems and novel manuscripts from the chest of drawers, sorted them out and stuffed them into an army-green canvas bag. He put on his best outfitâ€”a college-era gownâ€”and walked out the door with his bag on his back.

Tomorrow is the New Year, and something commemorative should be done.

He walked through the empty square and into the waterlogged underground passage. The corners of the walkways are covered with moss, and the once bright posters on the walls are yellowed and mottled.

He walked through here like walking into a biographical film featuring him.

Time and space lost their concept in the narrow darkness, and many images flashed through his mind. He saw him reading poetry at college dances; He saw him running like a boy across the avenue full of poplars; He saw him as a child holding a marshmallow and trying to feed it to a sea lion.

He also saw womenã€‚ The woman sat quietly on a white plastic chair listening to him read a poem, with a yellow spring flower pinned to her chest; Woman riding a bicycle across the field, ribbons flying on straw hats; Woman wearing floral dress playing a game of snares.

The underground passage is a gallery where no paintings are exhibited.

What is exhibited here is not painting, but memory and illusion. The reflected water of the Yongdao flows everywhere, giving people the illusion that their lives were once tightly intertwined. Illusions invade reality through memory. The stagnant water reflects the thin figure of the man, like white wax oil floating on the surface of the water.

The man walked out of the passage to the exhibition hall and stopped in front of a painting. He reached out and gently removed it from the wall, then used a knife to remove the frame, rolled up the canvas and stuffed it into a canvas bag.

His footprints took away the floating ash on the ground and ghostly footprints on the floor of the white Dali rock.

Men stood on the sidewalk and waited until the woman emerged from the corner of the street.

In the afternoon, the sky cleared.

The sunlight peeked out from behind the clouds for a long time, and this kind of good weather is rare in rainy cities. Men and women walked up zebra crossings, crossed intersections, walked over overpasses, and they came to the park to find that a gray pigeon was missing.

The woman suggested that they take a run around the park, so the man put his canvas bag under a cherry tree and ran with his legs open.

It was warm and at first he felt his joints rust, but the sunlight acted as oil, and soon he was walking like a fly.

Once he overtook the woman, he stopped in front of him and waited for her to catch up.

They chase and frolic like eight- or nine-year-old children.

The sunlight turns into scalding gold water, which paints the envelope of memory. For a moment, the man felt that this scene had a kind of fatalistic magic. He felt the wind, felt the softness of its cheeks like a ribbon a girl used to tie her hair, he felt the light, felt the sparkle it cast among the leaves like a bell hanging from a bicycle.

I can't tell which moment he felt that he and the woman were like an illusion born of a lonely city for too long, and it used all its strength to intertwine their fate.

They sat resting on the curb as the woman watched the man pull a manuscript fromTaking it out of her bag and handing it to herself, she took his latest work and read it carefully, not missing a single grammatical error.

The man looked at the woman's face quietly as usual, as he did every time he listened to her.

After reading the manuscript, he and she walked hand in hand on the road as the sunset faded. Through the gap between the tall buildings, a huge sun was cut to pieces.

Her eyes are orange, her face is orange, and her whole person is orange.

The ruins seemed far away from them, and he and she held hands and tread the mixed orange and dark blue road. The sunset is covering the sky, and it weaves the most beautiful robe for the funeral at sunset. She suddenly started singing a song, a song much older than them. Reminiscent of a rusty gramophone.

It was a song that belonged to a previous era. It is calm and tranquil, without the slightest stain of war, clean and pure like the newborn sun.

The woman asks the man to invite her to dance.

They danced the dances they had learned in college, and the canvas bag on the man's back slapped his back, and he was panting after a while. Even so, he refused to take off his backpack. The heavy load on his back made him feel realâ€”he desperately needed external forces to prove that the moment was real.

- His joy, his dancing steps, the rapid dimming sunset and the smile on the woman's face are all real.

He and the woman jumped until the sun went down.

They returned to the mall and the man asked the woman to invite him to climb the elevator.

They stood on stationary elevator steps, one up and one down. They close their eyes on the elevator and play Jesus Christ in a vain attempt to save the distant but ubiquitous suffering.

Eventually, they hugged together, her chin resting on his shoulder, and the man was like holding a bouquet of flowers from heaven. The heartbeat of a man and the heartbeat of a woman coincided, like a solemn bell ringing through the glass dome.

The rough and soft texture of the coat and wool fabric between the man's fingers made him irresistibly recall the nights when he embraced women. The material of the coat and blanket is far from the same, but the body temperature at the mouth of the heart is the same, and the warm body under the clothes is the same, even she lies on her shouldersThe angle of the head is exactly the same.

They do not believe in God, only in each other's existence.

On this unlit night, they climbed the elevator and carried the blanket to the top floor. The mall stands quietly, like a seashell by the sea.

They looked down from above, and under their feet was a lifeless city. Under the surface of the sea at night, the ruins are like a hideous skeleton, extending in all directions.

It's too cold, make a fire.

Did the woman say that first? Or your own decision?

The man didn't know, but he took out a lighter and tried to make a fire with a few pieces of waste wood.

It is impossible to ignite the wood directly. The man thought for a moment, turned out all the manuscript papers in his bag, and spread them out on the wood one by one. Seeing him doing this, the woman raised her eyebrows and didn't say a word. She understood what he meant. She knew they were all people who rarely thought about the consequences.

Some things may never be given a chance if not done in time.

She turned and got off the elevator, and soon came up with a paper bag. At this time, the man lit the fire, and the white manuscript paper and the blue ink on it finally moved the pieces of wood.

The woman took out the perfume bottle in the paper bag and smashed it with a red brick.

The aroma diffuses in the night breeze. The woman says it's her favorite flavor. The alcohol component of perfume makes the flame burn even stronger.

The man took out the painting, which showed the blue sea. He asked the woman if she had seen the color of the flames.

The sea water tumbled in the heat of the flames, with the white of the manuscript paper and the smell of perfume. They threw a part of each of them into the fire, and this was their common flame.

He threw the painting into the fire with her.

The painting wrinkled and softened in the flames, it melted little by little, turning to ashes along with their shadows. New Year's music sounded on the city radio, and cheerful accordion played a dance song.

The man took off his rucksack and took the woman's arm to invite her to dance. No longer trying to feel the reality with his weight, he wrapped his arms around the woman's waist and turned lightly in circle after circle. Three hundred and sixty degrees, seven hundred and twenty degrees, one thousand and eighty degrees...

The flames burned more and more, and their figures twisted and rose in the flames, as ifä»–ä»¬ were freeGenie of the night. In dance, everything lost will be found, and all chases will find the answer.
`
                    }
                ]
            },
        ];

        const pageDescriptions = {
            home: { title: "Home", content: renderHome },
            works: { title: "Works / Projects", content: renderWorks },
            feed: { title: "Field Notes", content: renderFeed },
            writing: { title: "Journal & Fragments", content: renderWriting },
            store: { title: "Small Objects", content: renderStore },
            about: { title: "Artist Statement", content: renderAbout },
        };

        // (Utility Functions, Page Rendering Functions ä¿æŒä¸å˜)

        // Simple debounce for resize/scroll listeners
        const debounce = (func, delay) => {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), delay);
            };
        };
        
        // NEW: Function to update the content of the right-hand preview panel for 'Works'
        function updateProjectPreview(projectId) {
            const previewDiv = document.getElementById('works-preview');
            if (!previewDiv) return;

            const project = projectsData.find(p => p.id === projectId);
            if (!project) return;
            
            // Deactivate all titles
            document.querySelectorAll('.works-index button').forEach(btn => btn.classList.remove('active-project'));
            // Activate the current title
            const activeBtn = document.querySelector(`.works-index button[data-project-id="${projectId}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active-project');
            }

            // --- ç¼–è¾‘ç‚¹ Aï¼šæ›¿æ¢é¢„è§ˆå›¾å ä½ç¬¦ ---
            // é¢„è§ˆå›¾è·¯å¾„æ¥è‡ª projectsData[n].previewImagePath
            const previewHtml = `
                <div class="preview-content show reveal">
                    <div class="preview-meta">${project.type} | ${project.year}</div>
                    <div class="preview-thumbnail">
                        <img src="${project.previewImagePath}" alt="Visual Preview for ${project.title}">
                    </div>
                    <p class="preview-caption">${project.caption}</p>
                    <button class="back-button" onclick="navigate('works/${project.id}')" style="margin-bottom:0;">View Full Details â†’</button>
                </div>
            `;
            
            // Clear old content with a fade-out effect for smoothness
            const oldContent = previewDiv.querySelector('.preview-content');
            if (oldContent) {
                oldContent.classList.remove('show');
                setTimeout(() => {
                    previewDiv.innerHTML = previewHtml;
                }, 100); // Wait for fade-out before injecting new content
            } else {
                previewDiv.innerHTML = previewHtml;
            }
        }


        // --- Home Background Cycle Logic (New) ---

        function cycleHomeBackground() {
            // ç¡®ä¿åªæœ‰ä¸€ä¸ªå®šæ—¶å™¨åœ¨è¿è¡Œ
            if (homeBackgroundCycleInterval) {
                clearInterval(homeBackgroundCycleInterval);
            }
            
            const images = backgroundImages['home'];
            if (!images || images.length === 0) return;

            // é¦–æ¬¡è®¾ç½®èƒŒæ™¯å›¾
            bgDiv.style.backgroundImage = `url('${images[currentHomeBgIndex]}')`;
            bgDiv.classList.add('home-bg-filter'); 

            homeBackgroundCycleInterval = setInterval(() => {
                // è®¡ç®—ä¸‹ä¸€å¼ å›¾çš„ç´¢å¼•
                currentHomeBgIndex = (currentHomeBgIndex + 1) % images.length;
                const nextImagePath = images[currentHomeBgIndex];

                // 1. å¿«é€Ÿæ·¡å‡ºå½“å‰å›¾ç‰‡ (åˆ©ç”¨ CSS transition: opacity 1.5s ease)
                bgDiv.style.opacity = 0; 
                
                // 2. åœ¨æ·¡å‡ºè¿‡ç¨‹ä¸­ï¼ˆ1.5s åï¼‰æ›´æ¢å›¾ç‰‡ URL
                setTimeout(() => {
                    // Preload next image (optional but recommended)
                    const tempImg = new Image();
                    tempImg.onload = () => {
                        bgDiv.style.backgroundImage = `url('${nextImagePath}')`;
                        // 3. æ·¡å…¥æ–°å›¾ç‰‡ (æ¢å¤ Home é¡µé¢çš„é«˜é€æ˜åº¦)
                        bgDiv.style.opacity = 0.4; // å¯¹åº” .home-bg-filter çš„ opacity å€¼
                    };
                    tempImg.src = nextImagePath;

                }, 1500); // å¿…é¡»å¤§äºæˆ–ç­‰äº CSS transition çš„æ—¶é—´ (1.5s)
                
            }, 6000); // 6ç§’åˆ‡æ¢ä¸€æ¬¡ (1.5s æ·¡å‡º + 1.5s æ·¡å…¥ + 3s æ˜¾ç¤º)
        }
        
        // Render Functions (ä¿æŒä¸å˜)

        function renderHome() {
            return `
                <section id="home">
                    <div class="light-blur"></div>
                    <div class="hero-text reveal">
                        <h1>
                            A digital media artist tracing the poetics of memory and the everyday.
                        </h1>
                    </div>
                    <div class="scroll-indicator">Scroll down</div>
                </section>
            `;
        }
        
        function renderWorks() {
            const indexHtml = projectsData.map((p, index) => `
                <button 
                    class="reveal" 
                    data-project-id="${p.id}"
                    onclick="navigate('works/${p.id}')"
                    onmouseover="updateProjectPreview('${p.id}')"
                    style="transition-delay: ${index * 0.05}s;"
                >
                    <h3 class="works-index-title">${p.title}</h3>
                </button>
            `).join('');

            const initialPlaceholderHtml = `
                <div class="preview-content show reveal" style="transition-delay: 0.1s;">
                    <div class="preview-meta">Hover over a project title to view a brief description.</div>
                    <div class="preview-thumbnail">
                        <span class="en-text" style="color: rgba(255, 255, 255, 0.3);">Project Visual Preview</span>
                    </div>
                    <p class="preview-caption" style="opacity: 0.5;">
                        Select a project from the left index to see the full details page.
                    </p>
                </div>
            `;

            return `
                <section id="works">
                    <div class="section-header">
                        <h2>WORKS / PROJECTS</h2>
                    </div>
                    <div class="works-container">
                        <div class="works-index">
                            ${indexHtml}
                        </div>
                        <div class="works-preview" id="works-preview">
                            ${initialPlaceholderHtml}
                        </div>
                    </div>
                </section>
            `;
        }
        
        function renderProjectDetails(projectId) {
            const project = projectsData.find(p => p.id === projectId);

            if (!project) {
                return `<section id="project-detail"><p class="p-serif">Project not found.</p></section>`;
            }
            
            const visualHtml = project.detailVisuals.map((visual, index) => `
                <div class="detail-visual reveal" style="transition-delay: ${index * 0.15}s;">
                    <img src="${visual.path}" alt="${visual.label}">
                </div>
            `).join('');

            // --- è§†é¢‘é“¾æ¥é€»è¾‘ ---
            // ä½¿ç”¨ project.videoLink å­—æ®µï¼Œå¦‚æœå­˜åœ¨åˆ™æ¸²æŸ“æŒ‰é’®
            const videoLinkHtml = project.videoLink ? `
                <a href="${project.videoLink}" target="_blank" style="
                    font-family: var(--font-sans); 
                    font-size: 0.9rem; 
                    text-transform: uppercase; 
                    letter-spacing: 0.05em; 
                    color: var(--text-color); 
                    margin-top: 1.5rem; 
                    padding: 0.75rem 1.5rem; 
                    border: 1px solid var(--border-color); 
                    background-color: var(--bg-secondary); 
                    display: inline-block; 
                    transition: background-color 0.3s ease, border-color 0.3s ease;
                    text-decoration: none;
                ">
                    Watch Video / Documentation â†’
                </a>
            ` : '';
            // --- ç»“æŸè§†é¢‘é“¾æ¥é€»è¾‘ ---

            return `
                <section id="project-detail" class="reveal">
                    <button class="back-button" onclick="navigate('works')">â† Back to Projects Index</button>
                    <div class="detail-header">
                        <h2 style="margin-bottom: 0.5rem; color: var(--text-color);">${project.type} | ${project.year}</h2>
                        <h3>${project.title}</h3>
                    </div>
                    <div class="detail-body">
                        <div class="detail-description">
                            <p class="p-serif">${project.description}</p>
                            ${videoLinkHtml} 
                        </div>
                        <div class="detail-media">
                            ${visualHtml}
                        </div>
                    </div>
                </section>
            `;
        }

        function renderFeed() {
            // ** ä¼˜åŒ–åçš„å¸–å­æ•°æ®ï¼Œç»Ÿä¸€ä½¿ç”¨ imagePath **
            const posts = [
                { date: "Dec 01, 2025", time: "14:30", type: "Image/Text", content: "The paramecium number on the road lives my fake Big Bang of the universe.", imagePath: "images/boom.png" }, 
                { date: "Nov 28, 2025", time: "10:00", type: "Text", content: "The world is not purely black or white. Keep asking until the fervor fades away. Wait for the weather to clear before deciding to return to the rafting excursion. It's as if we're eagerly awaiting a holiday that's bound to come." },
                { date: "Nov 15, 2025", time: "18:45", type: "Video Still", content: "The World to Me.", imagePath: "images/theworldtome_2.jpeg" },
                { date: "Oct 22, 2025", time: "12:00", type: "Object", content: "The shape of ash...the relic of a city.", imagePath: "images/ICEGROUP_2.png" },
            ];

            const postHtml = posts.map((p, index) => `
                <div class="feed-post reveal" style="transition-delay: ${index * 0.1}s;">
                    <div class="feed-header">
                        <span class="feed-type">${p.type} â€” ${p.date} ${p.time}</span>
                    </div>

                    ${p.imagePath ? `
                    <div class="feed-visual-placeholder">
                        <img src="${p.imagePath}" alt="Visual for ${p.content.substring(0, 30)}" loading="lazy">
                    </div>
                    ` : ''}

                    <div class="feed-body">
                        <p class="p-serif" style="font-size: 1rem;">${p.content}</p>
                    </div>
                </div>
            `).join('');

            return `
                <section id="feed">
                    <div class="section-header">
                        <h2>FIELD NOTES / CURRENT OBSERVATIONS</h2>
                    </div>
                    <div class="feed-container">
                        <div class="feed-grid">
                            ${postHtml}
                        </div>
                    </div>
                </section>
            `;
        }

        function renderWriting() {
            const writingHtml = fragmentsData.map((f, index) => `
                <button class="journal-entry-card reveal" onclick="navigate('writing/${f.id}')" style="transition-delay: ${index * 0.1}s;">
                    <div class="entry-title-wrap">
                        <span class="entry-date">${f.date}</span>
                        <h3 class="entry-title">${f.title}</h3>
                    </div>
                    <span class="read-more">Read Entry â†’</span>
                </button>
            `).join('');

            return `
                <section id="writing">
                    <div class="section-header">
                        <h2>JOURNAL / FRAGMENTS</h2>
                    </div>
                    <div class="journal-container">
                        ${writingHtml}
                    </div>
                </section>
            `;
        }

        // ** å·²ä¿®æ”¹: ç›®å½•æŒ‰é’®å¯¼èˆªåˆ°ä¸‰çº§è·¯ç”± **
        function renderWritingDetails(fragmentId) {
            const entry = fragmentsData.find(f => f.id === fragmentId);

            if (!entry) {
                return `<section id="fragment-detail"><p class="p-serif">Entry not found.</p></section>`;
            }
            
            // æ„å»ºç›®å½• HTML
            const directoryHtml = (entry.sections || []).map((section, index) => `
                <button 
                    class="directory-item reveal" 
                    style="transition-delay: ${index * 0.05}s;" 
                    onclick="navigate('writing/${entry.id}/${index}')"
                >
                    ${section.title}
                    <span style="font-size: 0.8rem; color: var(--text-muted);">View Section â†’</span>
                </button>
            `).join('');

            return `
                <section id="fragment-detail" class="reveal">
                    <button class="back-button" onclick="navigate('writing')">â† Back to Journal Index</button>
                    <div class="detail-header">
                        <span class="entry-date" style="display:block; margin-bottom: 0.5rem;">${entry.date}</span>
                        <h3 style="font-size: 3rem; font-style: italic;">${entry.title}</h3>
                    </div>
                    <div class="detail-body" style="max-width: 65ch; margin-top: 3rem;">
                        <p class="p-serif">
                            // Journal Abstract: ${entry.content.substring(0, 150)}...
                        </p>
                        
                        <div class="journal-directory">
                            <h3 style="font-size: 1.2rem; margin-bottom: 1rem; color: var(--text-muted); text-transform: uppercase; font-family: var(--font-sans);">Contents / Catalogue</h3>
                            ${directoryHtml}
                        </div>

                        <div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                            <p class="en-text" style="font-size: 0.9rem; color: var(--text-muted);">
                                // Note: This fragment is part of the ongoing 'Field Notes' collection.
                            </p>
                        </div>
                    </div>
                </section>
            `;
        }
        
        // ** æ–°å¢å‡½æ•°ï¼šæ¸²æŸ“å®é™…çš„æ–‡æœ¬å†…å®¹ (ä½¿ç”¨ <pre> æ ‡ç­¾ä¿ç•™æ ¼å¼) **
        function renderWritingSection(fragmentId, sectionIndex) {
            const entry = fragmentsData.find(f => f.id === fragmentId);
            const section = entry && entry.sections && entry.sections[sectionIndex];
            
            if (!entry || !section) {
                return `<section id="fragment-section-view"><p class="p-serif">Text section not found.</p></section>`;
            }

            return `
                <section id="fragment-section-view" class="reveal">
                    <button class="back-button" onclick="navigate('writing/${entry.id}')">â† Back to '${entry.title}' Contents</button>
                    
                    <div class="detail-header">
                        <h2 style="margin-bottom: 0.5rem; color: var(--text-muted);">${entry.title}</h2>
                        <h3 style="font-style: italic; font-weight: 300;">${section.title}</h3>
                        <span class="entry-date" style="display:block; margin-top: 0.5rem;">${entry.date}</span>
                    </div>
                    
                    <div class="detail-body" style="margin-top: 2rem;">
                        <div class="text-content-body reveal" style="transition-delay: 0.1s;">
                            <pre>${section.content}</pre>
                        </div>
                    </div>
                </section>
            `;
        }


        function renderStore() {
            // ** ä¼˜åŒ–åçš„å•†å“æ•°æ®ï¼ŒåŒ…å«å›¾ç‰‡è·¯å¾„ **
            const products = [
                { 
                    name: "Cigarette earrings", 
                    price: "15 RMB", 
                    caption: "I collect the cigarette butts I've smoked and use resin to make them into earrings.",
                    imagePath: "images/STORE_earings.jpg" // ç¤ºä¾‹è·¯å¾„
                },
                { 
                    name: "ICE CUBE", 
                    price: "8 RMB", 
                    caption: "Small ice cubes tring to keep the shape of ash.",
                    imagePath: "images/STORE_ICE_3.jpg" // ç¤ºä¾‹è·¯å¾„
                },
                { 
                    name: "Stillness Object (Hand-cast Resin)", 
                    price: "5 RMB", 
                    caption: "Use resin to preserve pigments or other small items as archives.",
                    imagePath: "images/STORE_BG_ICEGROUP_1.png" // ç¤ºä¾‹è·¯å¾„
                },
            ];

            const productHtml = products.map((p, index) => `
                <div class="product-card reveal" style="transition-delay: ${index * 0.1}s;">
                    <div class="product-thumb">
                        ${p.imagePath ? `<img src="${p.imagePath}" alt="${p.name}" loading="lazy" />` : `<span style="font-size:1.5rem;">${p.name.split(':')[0].trim()}</span>`}
                    </div>

                    <div class="product-info">
                        <h3>${p.name}</h3>
                        <p class="en-text" style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">${p.caption}</p>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <span class="product-price">${p.price}</span>
                            <button class="buy-button">Inquire / Buy</button>
                        </div>
                    </div>
                </div>
            `).join('');

            return `
                <section id="store">
                    <div class="section-header">
                        <h2>STORE / OBJECTS</h2>
                        <p class="en-text" style="font-size:1rem; color:var(--text-color); margin-bottom:0;">Tangible residues from the digital practice.</p>
                    </div>
                    <div class="store-grid">
                        ${productHtml}
                    </div>
                </section>
            `;
        }

        function renderAbout() {
            return `
                <section id="about">
                    <div class="section-header">
                        <h2>ABOUT</h2>
                    </div>
                    <div class="about-inner reveal">
                        <div class="about-content">
                            <div class="artist-portrait">
                                <img src="images/portrait_xinran_orange.jpg" alt="Cao Xinran Portrait" style="object-fit: cover; width: 100%; height: 100%; display: block;">
                            </div>

                            <div class="statement-text">
                                <h3>
                                    About Cao Xinran
                                </h3>
                                <p class="p-serif">
                                    Cao Xinran is currently studying at the Institute of Creativity and Innovation, Xiamen University. Passionate about observing and exploring both daily life and past memories, she navigates a state of "free-flowing contemplation" through visual media and writing. She seeks to capture blurred fragments of the past and subtle, easily overlooked moments of the present.
                                </p>
                                <pre class="p-serif">æ›¹æ¬£ç„¶ä»¥å½±åƒã€æ–‡å­—ä¸è¡Œä¸ºè¡¨æ¼”ä¸ºä¸»è¦åª’ä»‹ï¼ŒæŒç»­å…³æ³¨æ—¥å¸¸ç”Ÿæ´»ä¸ä¸ªäººè®°å¿†çš„å†é‡ä¸å†æ€ã€‚
åˆ›ä½œä¸­ï¼Œå¥¹å¸¸åœç•™äºä¸€ç§â€œè‡ªç”±æ¼‚æµ®çš„æ€ç»ªâ€çŠ¶æ€ï¼Œåœ¨æƒ³è±¡ã€è®°å¿†ä¸æ„ŸçŸ¥çš„äº¤é”™ä¸­è¿›è¡Œæ¢ç´¢ã€‚
å¯¹å¥¹è€Œè¨€ï¼Œâ€œè§‚å¯Ÿâ€æ—¢æ˜¯ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¸€ç§åª’ä»‹â€”â€”ä¸€ç§æ²‰æµ¸å¼åœ°è¿›å…¥ä¸–ç•Œã€æ„Ÿå—å…¶çº¹ç†ï¼Œå¹¶ä»å¯»å¸¸äº‹ç‰©ä¹‹ä¸‹æŒ–æ˜éšç§˜å™äº‹çš„æ–¹å¼ã€‚
å°è¯•æ•æ‰è¿‡å»æ¨¡ç³Šçš„ç¢ç‰‡å½“ä¸‹è¢«å¿½ç•¥çš„å¾®å°ç¬é—´ã€‚</pre>

                                <div class="contact-info">
                                    <h3 style="font-size:1.5rem; margin-bottom:0.8rem; font-style:normal; font-family:var(--font-sans); text-transform:uppercase;">Contact</h3>
                                    <p class="en-text" style="font-size:1rem; color:var(--text-color);">Email: <a href="mailto:3020587335@qq.com" style="color:var(--text-color);">3020587335@qq.com</a></p>
                                    <div class="social-links" style="margin-top:1rem;">
                                        <a href="https://www.instagram.com/xinran_pinocchio" target="_blank">@xinran_pinocchio (Instagram)</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `;
        }

        // --- Core Navigation and Init (Updated for visible Works/Writing background) ---

        function navigate(path, skipHistory = false) {
            const parts = path.split('/');
            const pageKey = parts[0]; // 'works', 'home', 'writing', etc.
            const subKey = parts[1]; // 'project-01', 'fragment-02', etc.
            const subSubKey = parts[2]; // '0', '1', '2' (section index)

            // æ£€æŸ¥è·¯ç”±æ˜¯å¦æœ‰æ•ˆ
            const isProjectRoute = (pageKey === 'works' && subKey);
            const isFragmentIndexRoute = (pageKey === 'writing' && subKey && !subSubKey);
            const isFragmentSectionRoute = (pageKey === 'writing' && subKey && subSubKey);
            
            if (!pageDescriptions[pageKey] && !isProjectRoute && !isFragmentIndexRoute && !isFragmentSectionRoute) return;

            // 1. åœæ­¢ Home å¹»ç¯ç‰‡å¾ªç¯
            if (homeBackgroundCycleInterval) {
                clearInterval(homeBackgroundCycleInterval);
                homeBackgroundCycleInterval = null;
            }
            // ç§»é™¤ Home ç‰¹æ®Šæ»¤é•œç±»
            bgDiv.classList.remove('home-bg-filter'); 

            // Update active state in nav links
            document.querySelectorAll('.nav-links button').forEach(btn => {
                btn.classList.remove('nav-highlight');
                // Highlight the parent navigation item
                const btnText = btn.innerText.toLowerCase();
                if (btnText === pageKey || 
                    (pageKey === 'works' && btnText === 'works') || 
                    (pageKey === 'writing' && btnText === 'writing')) {
                    btn.classList.add('nav-highlight');
                }
            });

            currentPage = pageKey;
            let contentHtml = '';
            let titleText = '';
            let targetBgPath = null;
            // è°ƒæ•´ 3/3ï¼šWorks å’Œ Writing é¡µé¢ä½¿ç”¨æ›´äº®çš„èƒŒæ™¯è®¾ç½®
            let targetOpacity = 0.3; // Writing é¡µçš„èƒŒæ™¯é€æ˜åº¦
            let targetFilter = 'grayscale(60%) brightness(0.85)'; // Writing é¡µçš„èƒŒæ™¯æ»¤é•œæ›´æŸ”å’Œ

            if (pageKey === 'home') {
                targetOpacity = 0.4;
                targetFilter = 'grayscale(30%) brightness(0.5)';
                // å¯åŠ¨ Home å¹»ç¯ç‰‡å¾ªç¯ (å®ƒè‡ªå·±ä¼šè®¾ç½®èƒŒæ™¯å›¾å’Œæ»¤é•œç±»)
            }
            else if (pageKey === 'works' || isProjectRoute) {
                // Works ç´¢å¼•é¡µå’Œè¯¦æƒ…é¡µ
                targetOpacity = 0.25; // Works é¡µçš„èƒŒæ™¯é€æ˜åº¦
                targetFilter = 'grayscale(80%) brightness(0.8)'; // Works é¡µçš„èƒŒæ™¯æ»¤é•œ
                if (subKey) {
                    contentHtml = renderProjectDetails(subKey);
                    const project = projectsData.find(p => p.id === subKey);
                    titleText = project ? `Works / ${project.title}` : 'Works / Project Details';
                    targetBgPath = project && project.backgroundImage ? project.backgroundImage : backgroundImages['works'];
                } else {
                    contentHtml = renderWorks();
                    titleText = pageDescriptions[pageKey].title;
                    targetBgPath = backgroundImages[pageKey];
                }
            } else if (pageKey === 'writing' || isFragmentIndexRoute || isFragmentSectionRoute) { 
                // Writing ç´¢å¼•é¡µã€ç›®å½•é¡µã€æ–‡æœ¬é¡µ
                
                if (isFragmentSectionRoute) {
                    // ä¸‰çº§è·¯ç”±ï¼šæ˜¾ç¤ºå…·ä½“æ–‡æœ¬å†…å®¹
                    contentHtml = renderWritingSection(subKey, subSubKey);
                    const entry = fragmentsData.find(f => f.id === subKey);
                    const sectionTitle = entry && entry.sections[subSubKey] ? entry.sections[subSubKey].title : 'Section';
                    titleText = entry ? `Journal / ${entry.title} / ${sectionTitle}` : 'Journal / Fragment';
                    targetBgPath = backgroundImages['writing']; // ** ä¿æŒèƒŒæ™¯ä¸å˜ **

                } else if (isFragmentIndexRoute) {
                    // äºŒçº§è·¯ç”±ï¼šæ˜¾ç¤ºç›®å½•é¡µ
                    contentHtml = renderWritingDetails(subKey);
                    const entry = fragmentsData.find(f => f.id === subKey);
                    titleText = entry ? `Journal / ${entry.title}` : 'Journal / Fragment';
                    targetBgPath = backgroundImages['writing']; // ** ä¿æŒèƒŒæ™¯ä¸å˜ **
                } else {
                    // ä¸€çº§è·¯ç”±ï¼šæ˜¾ç¤ºç´¢å¼•é¡µ
                    contentHtml = renderWriting();
                    titleText = pageDescriptions[pageKey].title;
                    targetBgPath = backgroundImages[pageKey];
                }
            } else {
                // å¤„ç† feed, store, about é¡µé¢
                targetOpacity = 0.25; // é»˜è®¤å€¼
                targetFilter = 'grayscale(70%) brightness(0.7)'; // é»˜è®¤å€¼
                contentHtml = pageDescriptions[pageKey].content();
                titleText = pageDescriptions[pageKey].title;
                targetBgPath = backgroundImages[pageKey];
            }
            
            // --- æ ¸å¿ƒä¼˜åŒ–ï¼šèƒŒæ™¯å›¾å¹³æ»‘è¿‡æ¸¡é€»è¾‘ ---
            // åªæœ‰å½“ç›®æ ‡èƒŒæ™¯å›¾è·¯å¾„ä¸å½“å‰èƒŒæ™¯å›¾è·¯å¾„ä¸åŒæ—¶ï¼Œæ‰æ‰§è¡Œæ·¡å‡º/æ›´æ¢/æ·¡å…¥æ“ä½œ
            // å¦åˆ™ï¼Œåªç¡®ä¿åº”ç”¨äº†æ­£ç¡®çš„æ»¤é•œ/é€æ˜åº¦ï¼ˆç”¨äºåŒä¸€é¡µé¢å†…å­è·¯ç”±åˆ‡æ¢ï¼‰
            
            const currentBgUrl = bgDiv.style.backgroundImage.slice(5, -2); // Extracts URL without 'url("")'
            
            if (pageKey === 'home') {
                // Home é¡µé¢æœ‰ä¸“é—¨çš„å¾ªç¯é€»è¾‘ï¼Œè¿™é‡Œåªç¡®ä¿å¯åŠ¨å®ƒ
                bgDiv.style.filter = targetFilter;
                bgDiv.style.opacity = targetOpacity;
                cycleHomeBackground();

            } else if (bgDiv && targetBgPath && currentBgUrl !== targetBgPath) {
                // 1. æ·¡å‡ºå½“å‰èƒŒæ™¯
                bgDiv.style.opacity = 0;
                
                setTimeout(() => {
                    // 2. æ›´æ”¹èƒŒæ™¯å›¾ URL å’Œæ»¤é•œ
                    bgDiv.style.backgroundImage = `url('${targetBgPath}')`;
                    bgDiv.style.filter = targetFilter;
                    // 3. æ·¡å…¥æ–°èƒŒæ™¯
                    bgDiv.style.opacity = targetOpacity;
                }, 500); // ä½¿ç”¨ CSS å®šä¹‰çš„ 0.5s è¿‡æ¸¡æ—¶é—´

            } else if (bgDiv && targetBgPath) {
                // å¦‚æœèƒŒæ™¯è·¯å¾„ç›¸åŒ (ä¾‹å¦‚ï¼Œåœ¨ 'writing' çš„å­è·¯ç”±ä¹‹é—´åˆ‡æ¢)ï¼Œç¡®ä¿æ ·å¼åº”ç”¨ä½†æ— æ·¡å…¥æ·¡å‡ºå»¶è¿Ÿ
                bgDiv.style.backgroundImage = `url('${targetBgPath}')`;
                bgDiv.style.filter = targetFilter;
                bgDiv.style.opacity = targetOpacity;
            }


            // Set content and delay the reveal animation
            // åœ¨æ›¿æ¢å†…å®¹å‰å…ˆæ¸…ç©ºå½“å‰çš„ reveal çŠ¶æ€
            contentDiv.classList.remove('loaded');
            
            // å»¶è¿Ÿæ¸…ç©ºå†…å®¹ï¼Œä»¥ä¾¿æ—§å†…å®¹æœ‰æ—¶é—´æ·¡å‡º
            setTimeout(() => {
                contentDiv.innerHTML = contentHtml;

                // Check if we are on the main works index page and initialize the preview panel
                if (pageKey === 'works' && !subKey && projectsData.length > 0) {
                    // Delay slightly to ensure all DOM elements are mounted before trying to find and highlight them
                    setTimeout(() => {
                        updateProjectPreview(projectsData[0].id);
                    }, 100);
                }

                // Trigger reveal animation for general elements
                setTimeout(() => {
                    document.querySelectorAll('.reveal').forEach(el => {
                        el.classList.add('active');
                    });
                }, 50);

                document.title = `Cao Xinran | ${titleText}`;
                contentDiv.classList.add('loaded');
            }, 50); // æå°çš„å»¶è¿Ÿæ¥å¤„ç†å†…å®¹æ·¡å…¥æ·¡å‡º


            if (!skipHistory) {
                // Update URL hash for sharing/back button
                window.history.pushState({ path: path }, titleText, `#${path}`);
            }

            // Scroll to top on navigation
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Intersection Observer for scroll-based reveal effect
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, { threshold: 0.1 });


        // Handle browser back/forward buttons
        window.addEventListener('popstate', (event) => {
            const hash = window.location.hash.substring(1);
            const path = hash || 'home';
            navigate(path, true); // Skip adding to history again
        });

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            const initialHash = window.location.hash.substring(1);
            const initialPath = initialHash || 'home';
            
            // First navigation to populate the content
            navigate(initialPath); 
            
            // Now observe the elements loaded by navigate()
            // We need a small delay because innerHTML replacement is async
            setTimeout(() => {
                document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
            }, 100);
        });

    </script>
</body>
</html>