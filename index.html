<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cao Xinran | Digital Media Artist</title>
    <style>
        /* 确保手机菜单盖在所有东西上面 */
.mobile-overlay {
    position: fixed;
    top: 0;
    right: -100%; /* 默认藏在右边 */
    width: 100%;
    height: 100vh;
    background: rgba(10, 10, 10, 0.98);
    z-index: 9999; /* 数值要足够大 */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 2rem;
    transition: 0.5s ease-in-out;
}

/* 激活状态：滑入屏幕 */
.mobile-overlay.active {
    right: 0;
}

/* 手机菜单内的按钮样式 */
.mobile-overlay button {
    background: none;
    border: none;
    color: #fff;
    font-size: 1.5rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    cursor: pointer;
}

/* 汉堡图标在手机端的显示逻辑 */
@media (max-width: 1024px) {
    .hamburger { display: block !important; }
    .nav-links { display: none !important; } /* 隐藏电脑端导航 */
}
        /* --- CSS Variables --- */
        :root {
            --bg-color: #0a0a0a;
            --bg-secondary: #141414;
            --text-color: #e6e6e6;
            --text-muted: #888888;
            --border-color: #333333;
            --accent-color: #ffffff;
            
            --font-serif: 'Arial', Helvetica, sans-serif;
            --font-sans: 'Arial', Helvetica, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-serif);
            line-height: 1.7; /* 保持全局行高不变 */
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        /* --- Main Background Image Container --- */
        .main-bg-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            z-index: 0; 
            opacity: 0.25; 
            filter: grayscale(50%) brightness(0.7); 
            transition: opacity 0.5s ease, filter 0.5s ease, background-image 0s;
        }

        .home-bg-filter {
            filter: grayscale(30%) brightness(0.7) !important; 
        }
        
        /* --- Typography --- */
        h1, h2, h3 {
            font-weight: 300;
            color: #fff;
        }

        h2 {
            font-family: var(--font-sans);
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }
        
        .en-text, .project-info span, .feed-type {
            font-family: var(--font-sans);
            color: #999;
            font-weight: 300;
            font-size: 1rem;
        }
        
        .p-serif {
            font-size: 1.2rem;
            font-weight: 300;
            color: #cccccc;
        }

        a {
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
        }

        a:hover {
            color: var(--text-color);
            opacity: 1;
        }
        
        /* Hide content until JS is loaded */
        #content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        #content.loaded {
            opacity: 1;
        }

        /* --- Navigation --- */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 2rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: linear-gradient(to bottom, rgba(10,10,10,0.95) 0%, rgba(10,10,10,0) 100%);
            backdrop-filter: blur(2px);
        }

        .logo {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-style: italic;
            letter-spacing: 0.02em;
            white-space: nowrap;
            z-index: 101;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            font-family: var(--font-sans);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }
        
        .nav-links button {
            background: none;
            border: none;
            cursor: pointer;
            color: inherit;
            padding: 0;
            transition: color 0.3s ease;
        }
        
        .nav-links button:hover {
            color: var(--text-color);
        }

        .nav-highlight {
            color: #fff !important;
            border-bottom: 1px solid rgba(255,255,255,0.3);
        }

        /* --- 汉堡按钮的基本样子 --- */
.hamburger {
    display: none; /* 【关键隔离点】默认不显示，确保电脑端看不见它 */
    cursor: pointer;
    background: none;
    border: none;
    padding: 10px;
    z-index: 2000; /* 确保它在最前面 */
}

/* 汉堡按钮的三条杠 */
.hamburger span {
    display: block;
    width: 25px;
    height: 1px; /* 极简的细线 */
    background-color: #fff;
    margin: 6px 0;
    transition: 0.3s;
}

/* --- 手机全屏菜单的基本样子 --- */
.mobile-overlay {
    position: fixed;
    top: 0;
    right: -100%; /* 【关键隔离点】初始位置在屏幕右侧外面，看不见 */
    width: 100%;
    height: 100vh;
    background: rgba(10, 10, 10, 0.98); /* 接近纯黑 */
    z-index: 1500;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 2rem;
    transition: 0.5s ease-in-out; /* 侧滑效果 */
}

        /* --- Animation Utilities --- */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s ease, transform 1.2s ease;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Section Layout --- */
        section {
            min-height: 100vh;
            padding: 8rem 3rem;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .section-header {
            margin-bottom: 4rem;
            border-top: 1px solid var(--border-color);
            padding-top: 1rem;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        /* --- HOME --- */
        #home {
            justify-content: center;
            align-items: center;
            overflow: hidden;
            min-height: 90vh;
        }

        .light-blur {
            position: absolute;
            width: 50vw;
            height: 50vw;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.07) 0%, rgba(10, 10, 10, 0) 70%);
            filter: blur(80px);
            animation: breathe 12s infinite alternate ease-in-out;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes breathe {
            0% { transform: translate(-10%, -10%) scale(1); opacity: 0.4; }
            100% { transform: translate(10%, 5%) scale(1.2); opacity: 0.7; }
        }

        .hero-text {
            text-align: center;
            max-width: 800px;
            z-index: 1;
        }

        .hero-text h1 {
            font-family: var(--font-serif);
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 300;
            line-height: 1.2;
            letter-spacing: -0.01em;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 3rem;
            font-family: var(--font-sans);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            opacity: 0.5;
            animation: fadeInOut 3s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }

        /* --- WORKS (Index) --- */
        #works {
            min-height: 100vh;
            align-items: center; 
        }

        .works-container {
            display: flex;
            width: 100%;
            max-width: 100%;  
            margin: 0 auto; 
            gap: 5rem;
        }

        .works-index {
            flex: 0 0 40%; 
            border-right: 1px solid var(--border-color);
            padding-right: 0;
        }

        .works-index button {
            display: block;
            width: 100%;
            background: none;
            border: none;
            padding: 1.5rem 0;
            cursor: pointer;
            text-align: left;
            border-top: 1px solid rgba(255,255,255,0.05);
            transition: color 1s ease, background-color 1s ease;
        }

        .works-index button:first-child {
            border-top: none; 
        }

        .works-index button.active-project {
            color: var(--text-color);
            background-color: rgba(255,255,255,0.01);
        }
        
        /* Highlight on hover */
        .works-index button:hover:not(.active-project) {
            color: var(--text-color);
        }

        .works-index-title {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 400; 
            color: var(--text-muted);
            transition: color 0.3s ease;
        }
        .works-index button.active-project .works-index-title {
            color: var(--text-color);
        }

           .works-preview {
            flex: 1; 
            padding-left: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            /* MODIFICATION: 顶端对齐 */
            justify-content: flex-start;
            min-height: 500px; 
        }

        .preview-content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .preview-content.show {
            opacity: 1;
        }

        .preview-meta {
            font-family: var(--font-sans);
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .preview-caption {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 400; 
            color: var(--text-color);
            margin-bottom: 1.5rem;
        }

        .preview-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            overflow: hidden; 
        }
        /* Make image fill the thumbnail container */
        .preview-thumbnail img, .detail-visual img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        /* --- PROJECT DETAIL (NEW) --- */
        
        #project-detail {
            max-width: 100%; 
            padding: 8rem 3rem;
            margin: 0;
        }

        .project-split-view {
            display: flex;
            gap: 4rem;
            width: 100%;
            align-items: flex-start;
        }

        /* 左侧：视觉区域 (约占2/3) */
        .visual-col {
            flex: 0 0 50%;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* 右侧：文字区域 (约占1/3) */
        .text-col {
            flex: 1;
            position: sticky;
            top: 6rem; 
            max-height: 80vh; /* 限制高度 */
            overflow-y: auto; /* 启用垂直滚动条 */
            padding-right: 15px; /* 留出空间给滚动条 */
        }
        /* 隐藏滚动条 (可选, 保持设计简洁) */
        .text-col::-webkit-scrollbar {
            width: 0;
            background: transparent; 
        }

        /* Gallery Wrapper */
        .gallery-wrapper {
            width: 100%;
            position: relative;
            background-color: #1a1a1a;
            border: 1px solid var(--border-color);
            aspect-ratio: 16/9;
            overflow: hidden;
        }

        .gallery-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: opacity 0.3s ease;
        }

        /* 鼠标移到右侧出现的交互层 */
        .gallery-nav-overlay {
            position: absolute;
            top: 0;
            right: 0;
            width: 50%;
            height: 100%;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 2rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            background: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.5) 100%);
        }

        .gallery-nav-overlay:hover {
            opacity: 1;
        }

        .gallery-arrow {
            color: #fff;
            font-family: var(--font-sans);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-size: 0.9rem;
            background: rgba(0,0,0,0.5);
            padding: 0.5rem 1rem;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .image-counter {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            font-family: var(--font-sans);
            font-size: 0.8rem;
            color: rgba(255,255,255,0.7);
            background: rgba(0,0,0,0.5);
            padding: 0.2rem 0.5rem;
            pointer-events: none;
        }

        /* Youtube 视频容器 */
        .video-container {
            width: 100%; 
            position: relative;
            padding-bottom: 28.125%; 
            height: 0;
            border: 1px solid var(--border-color);
            background: #000;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 200%;
            border: 0;
        }

        /* 文字区域样式 */
        .project-title {
            font-size: 1.6rem;
            margin-bottom: 0.5rem;
            font-weight: 400;
            line-height: 1.1;
        }
        
        .project-meta-info {
            font-family: var(--font-sans);
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        /* WORKS 详情页的描述文本容器 */
        .project-description-content {
            font-size: 1.0rem; 
            font-weight: 300;
            line-height: 1.5; /* ⬅️ 调整行高，让行距更紧凑 */
            color: #cccccc;
            white-space: pre-wrap; 
            text-indent: 0 !important;
            margin-bottom: 0.5rem; /* ⬅️ 调整段落间距为原来的一半 */
            padding-bottom: 0;
            white-space: pre-wrap;
        }

        /* About Page 个人介绍的通用段落样式（用于中文和英文） */
        .statement-text p, .statement-text pre {
            /* 确保 About 页面的段落也应用了更紧凑的间距 */
            font-size: 1.2rem;
            font-weight: 300;
            line-height: 1.5; 
            margin-bottom: 0.8rem; /* ⬅️ 调整段落间距 */
            max-width: 100%;
            text-indent: 0 !important; /* ⬅️ **确保左对齐** */
            white-space: pre-wrap;
        }

        /* --- FRAGMENT DETAIL / TEXT VIEW --- */
        #fragment-detail, #fragment-section-view {
            max-width: 1000px;
            margin: 0 auto;
        }
        .detail-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        .detail-header h3 {
            font-size: 3rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
            font-weight: 400; 
        }
        
        /* New style for the actual poem/text */
        .text-content-body {
            max-width: 50ch;
            font-family: var(--font-serif);
            font-size: 1.2rem;
            font-weight: 300;
            line-height: 1.8; 
            white-space: pre-wrap; 
        }
        .text-content-body pre {
            font-family: var(--font-serif);
            font-size: 1.2rem;
            font-weight: 300;
            line-height: 1.8;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            white-space: pre-wrap; 
        }

        .detail-body {
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }
        .detail-description {
            max-width: 70ch;
        }
        .detail-visual {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: #1a1a1a;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            overflow: hidden; 
        }
        
        .back-button {
            font-family: var(--font-sans);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 3rem;
            display: inline-block;
            cursor: pointer;
            transition: color 0.3s ease;
            background: none;
            border: none;
            padding: 0;
            text-align: left;
        }
        .back-button:hover {
            color: var(--text-color);
        }
        
        /* NEW: Directory list for Journal Details */
        .journal-directory {
            margin-top: 1rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .directory-item {
            font-family: var(--font-sans);
            font-size: 1rem;
            color: var(--text-color);
            padding: 1rem;
            border: 1px solid var(--border-color);
            text-align: left;
            background-color: var(--bg-secondary);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .directory-item:hover {
            background-color: #2a2a2a;
            transform: translateX(5px);
        }
        /* End NEW */


        /* --- FEED --- */
        #feed {
            align-items: center;
        }
        
        .feed-container {
            max-width: 1000px;
            width: 100%;
        }

        .feed-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); 
            gap: 2rem;
            width: 100%;
        }

        .feed-post {
            background-color: var(--bg-secondary);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 1.5rem;
            margin-bottom: 0; 
            transition: background-color 0.3s ease;
        }
        
        .feed-post:hover {
            background-color: #1a1a1a;
        }

        .feed-header {
            margin-bottom: 1rem;
        }
        
        /* CSS for the image container in feed posts */
        .feed-visual-placeholder {
            width: 100%;
            aspect-ratio: 1/1;
            background-color: #0a0a0a;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            border-radius: 2px;
            overflow: hidden; 
        }
        /* New rule for images inside the placeholder */
        .feed-visual-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* --- JOURNAL (Index & Detail styles) --- */
        #writing {
            align-items: center;
        }

        .journal-container {
            max-width: 50ch;
            width: 100%;
        }

        /* NEW: Style for the clickable index card */
        .journal-entry-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 2rem 0;
            margin-bottom: 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            background: none;
            border-top: none;
            border-left: none;
            border-right: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .journal-entry-card:hover {
            background-color: rgba(255,255,255,0.02);
        }
        
        .entry-title-wrap {
            text-align: left;
        }
        
        .entry-date {
            font-family: var(--font-sans);
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 0.5rem;
            display: block;
        }

        .entry-title {
            font-family: var(--font-serif);
            font-size: 1.8rem;
            margin: 0;
            color: var(--text-color);
            line-height: 1.2;
            text-align: left;
            font-weight: 400; 
        }

        .read-more {
            font-family: var(--font-sans);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: inline-block;
            color: var(--text-muted);
            white-space: nowrap;
        }
        .read-more:hover {
            color: var(--text-color);
        }


        /* --- STORE --- */
        #store {
            background-color: var(--bg-secondary);
        }

        .store-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3rem;
            width: 100%;
        }
        
        .product-card {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .product-thumb {   
            width: 100%;
            aspect-ratio: 4/5;
            background-color: #2a2a2a;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .product-thumb span {
            color: rgba(255, 255, 255, 0.2);
            font-family: var(--font-sans);
        }
        /* New rule for images inside the product thumb */
        .product-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .product-info {
            padding-top: 0.5rem;
        }
        
        .product-info h3 {
            font-family: var(--font-sans);
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.2rem;
            color: var(--text-color);
        }
        
        .product-info p {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .product-price {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 400;
        }

        .buy-button {
            font-family: var(--font-sans);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-color);
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            background-color: transparent;
            cursor: pointer;
            align-self: flex-end;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .buy-button:hover {
            background-color: rgba(255,255,255,0.1);
            border-color: var(--text-color);
        }

        /* --- ABOUT --- */
        #about {
            
            min-height: 80vh;
        }
        
        .about-inner {
            width: 100%;
            padding: 0 rem;
        }

        .about-content {
            display: flex;
            gap: 5rem;
            align-items: flex-start;
        }

        .artist-portrait {
            flex: 0 0 350px;
            height: 450px;
            background-color: #1a1a1a;
            overflow: hidden;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .statement-text {
            flex: 1;
        }
        
        .statement-text h3 {
            font-family: var(--font-serif);
            font-size: 2rem;
            font-style: italic;
            margin-bottom: 1.5rem;
        }
        
        /* About Page 个人介绍的通用段落样式（用于中文和英文） */
        .statement-text p, .statement-text pre, .statement-text .project-description-content {
            /* 确保 About 页面的段落也应用了更紧凑的间距 */
            font-size: 1.0rem;
            line-height: 1.4; 
            margin-bottom: 0.5rem; /* ⬅️ 调整段落间距 */
            text-indent: 0 !important; /* ⬅️ **确保左对齐** */
            max-width: 100%;
            white-space: pre-wrap;
        }

        .contact-info {
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
            margin-top: 0.5rem;
        }
        
        .social-links a {
            font-family: var(--font-sans);
            font-size: 1rem;
            margin-right: 1.5rem;
            color: var(--text-muted);
        }

        /* --- Responsive Design (保持不变) --- */
        @media (max-width: 1024px) {
            /* --- 手机端逻辑隔离：隐藏电脑导航，显示汉堡按钮 --- */
            .nav-links {
                display: none !important; 
            }

            .hamburger {
                display: block !important; 
            }

            .mobile-overlay.active {
                right: 0; /* 点击时菜单从右侧滑入 */
            }
            /* --- 隔离结束 --- */
            .works-container {
                flex-direction: column;
                gap: 3rem;
            }
            .works-index {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                padding-right: 0;
                padding-bottom: 3rem;
            }
            .works-index button {
                padding: 1rem 0;
            }
            .works-preview {
                padding-left: 0;
                min-height: 200px;
            }
            .gallery-grid {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
            .store-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .feed-grid {
                grid-template-columns: repeat(2, 1fr); 
            }
            .about-content {
                flex-direction: column;
                gap: 2rem;
            }
            .artist-portrait {
                width: 100%;
                height: 400px;
                flex: none;
            }
            
            /* 响应式调整 Works 详情页的滚动和布局 */
            .project-split-view {
                flex-direction: column;
            }
            .visual-col {
                flex: none;
                width: 100%;
            }
            .text-col {
                position: relative; /* 取消 sticky */
                max-height: none;
                overflow-y: visible;
                padding-right: 0;
            }
            .video-container {
                width: 100%; /* 恢复全宽 */
                padding-bottom: 56.25%; /* 恢复 16:9 比例 */
            }
        }
        
        @media (max-width: 768px) {
            nav {
                padding: 1rem 1.5rem;
            }
            .nav-links {
                gap: 1rem;
                font-size: 0.7rem;
            }
            section {
                padding: 5rem 1.5rem;
            }
            .hero-text h1 {
                font-size: 1.8rem;
            }
            .store-grid, .feed-grid {
                grid-template-columns: 1fr; 
            }
        }

/* 让汉堡按钮始终保持在最顶层，防止被菜单遮罩盖住无法点击 */
.hamburger {
    display: none;      /* 电脑端默认隐藏 */
    position: relative; /* 确保 z-index 有效 */
    z-index: 10001;     /* 这个数字必须大于 mobile-overlay 的 9999 */
    cursor: pointer;
    background: none;
    border: none;
    padding: 10px;      /* 增加点击区域 */
}

/* 确保手机端时显示该按钮 */
@media (max-width: 1024px) {
    .hamburger {
        display: block !important;
    }
}

/* 自定义弹窗背景遮罩 */
.alert-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85); /* 深色透明 */
    backdrop-filter: blur(8px);    /* 关键：背景模糊，增加数字媒体艺术感 */
    display: none;                 /* 初始隐藏 */
    justify-content: center;
    align-items: center;
    z-index: 10000;                /* 确保比导航栏和汉堡菜单还要高 */
    opacity: 0;
    transition: opacity 0.4s ease;
}

/* 弹窗中心区域 */
.alert-box {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    padding: 3rem;
    max-width: 400px;
    width: 90%;
    display: flex;
    flex-direction: column;
    text-align: center;
}

/* 弹窗激活后的显示状态 */
.alert-overlay.show {
    display: flex;
    opacity: 1;
}




    </style>
</head>
<body class="is-loading">
    <div id="main-background" class="main-bg-image"></div>

    <nav>
        <div class="logo">Cao Xinran</div>
        
        <div class="nav-links">
            <button onclick="navigate('home')">Home</button>
            <button onclick="navigate('works')">Works</button>
            <button onclick="navigate('feed')">Field Notes</button>
            <button onclick="navigate('writing')">Writing</button>
            <button onclick="navigate('store')">Store</button>
            <button onclick="navigate('about')">About</button>
        </div>

        <button class="hamburger" onclick="toggleMenu()">
            <span></span><span></span><span></span>
        </button>
    </nav>

    <div class="mobile-overlay" id="mobileMenu">
        <button onclick="navigate('home'); toggleMenu()">Home</button>
        <button onclick="navigate('works'); toggleMenu()">Works</button>
        <button onclick="navigate('feed'); toggleMenu()">Field Notes</button>
        <button onclick="navigate('writing'); toggleMenu()">Writing</button>
        <button onclick="navigate('store'); toggleMenu()">Store</button>
        <button onclick="navigate('about'); toggleMenu()">About</button>
    </div>

    <main id="content">
    </main>

<div id="custom-alert" class="alert-overlay">
    <div class="alert-box">
        <p id="alert-message"></p>
        <button class="buy-button" onclick="closeAlert()" style="margin-top: 2rem; align-self: center;">Confirm</button>
    </div>
</div>


    <script>
        /* 点击汉堡按钮时切换菜单的打开和关闭状态 */
function toggleMenu() {
    const menu = document.getElementById('mobileMenu');
    if (menu) {
        menu.classList.toggle('active');
    // 优化：菜单打开时，防止手机网页上下滑动
        if (menu.classList.contains('active')) {
            document.body.style.overflow = 'hidden';
        } else {
            document.body.style.overflow = '';
        }
    }
}
        // --- Global variables ---
        let homeBackgroundCycleInterval = null;
        let currentHomeBgIndex = 0;
        const contentDiv = document.getElementById('content');
        const bgDiv = document.getElementById('main-background');
        let currentPage = 'home';
        
        // ** 作品展示图片索引管理 **
        let currentProjectVisualIndex = 0;

        // =======================================================
        // ========== 1. 背景图路径配置 (LFS CDN 绝对路径修复) ==========
        // =======================================================
        const backgroundImages = {
            'home': [
                'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FLAG_exh7.jpg',    
                'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FF_3.jpg',    
                'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_stand_by_the_river.png',    
                'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_3.jpg',    
                'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_riverside.png'     
            ],
            'works': 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/back.png',    
            'feed': 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/bg-feed.jpg',    
            'writing': 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/backforwriting.jpg', 
            'store': 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/bg-store.jpg',    
            'about': 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/Xinran_portrait.jpg',    
        };

        // =======================================================
        // ========== 2. 作品数据及图片路径 (LFS CDN 绝对路径修复 + 新描述) ==========
        // =======================================================
        const projectsData = [
            { 
                id: "project-01", 
                title: "THE EXCAVATOR_还想再当一会儿钉子户", 
                caption: "THE EXCAVATOR_还想再当一会儿钉子户", 
                description: `\nThis project is closely connected to my personal experience. From 2010 to 2016, I studied at Xiangshan Primary School in Yiwu, Zhejiang Province, and lived in the surrounding neighborhood for six or seven years. When I returned in 2019, the entire area had been almost completely cleared. The school stood alone, surrounded by excavators, like an island under siege. When I returned again in 2025, the site had become a construction zone, yet no new buildings had appeared. Time seemed suspended; the space remained in an unfinished state.
这个项目与我个人的生活经验密切相关。2010 至 2016 年，我就读于浙江省义乌市香山小学，并在周边街区生活了六七年。2019 年我曾回到这里，发现整个街区几乎被完全清空，小学孤零零地伫立在原地，周围停放着挖掘机，如同一座被围困的孤岛。直到 2025 年，我再次回到这里，那片土地已成为施工现场，却依然没有任何新建筑出现——时间在此被悬置，空间保持着一种未完成的状态。
\nAgainst this backdrop, I began to repeatedly ask: when the mechanical arm of the excavator swings toward the sky, what is it actually digging away? Or has nothing been taken at all?\n在这样的背景下，我开始反复思考：当挖掘机的机械臂朝向天空挥动时，它究竟挖走了什么？或者，是否什么也没有被挖走？
\nThis long-vacant site evokes a sensation akin to phantom limb pain. Certain things that have already disappeared continue to exist in the form of pain. Through reflecting on the excavator as a symbol of destructive force, I turn to Mark Fisher’s concept of hauntology. Fisher suggests that we inhabit a time haunted by “lost futures”—futures once promised but never realized, whose ghosts continue to linger in the present.\n这块长期空置的土地让我产生了一种类似“幻肢痛”的感受。某些已经消失的东西，依然以疼痛的形式存在着。正是在对挖掘机所象征的“破坏性力量”的反思中，我开始引入马克·费舍尔（Mark Fisher）的幽灵学（Hauntology）。费舍尔提出，我们所处的时代被“逝去的未来”所困扰——那些曾被许诺却未能实现的未来，即便已经失效，其幽灵仍在当下徘徊。
\n\nAt the same time, the concept of entropy from physics provides another lens through which I understand the disorder produced by urbanization. Urban renewal often entails the collapse of existing orders, the rupture between memory and space, and the homogenization of landscapes—a process that can be understood as a continuous increase in entropy. Individual memory is equally fragile, and demolition accelerates its dissipation by severing the connection between memory and physical space.\n与此同时，物理学中的“熵”概念为我理解城市化进程中的无序化提供了另一种视角。城市更新往往意味着旧有秩序的瓦解、空间记忆的断裂，以及景观的同质化。这一过程可以被理解为一种持续的“熵增”。而个体记忆本身同样是易逝的，拆除行为切断了记忆与物理空间之间的联系，加速了记忆的消散。
\n\nThe work takes the form of an augmented reality (AR) installation, in which vanished architectural structures are repositioned at their original site. I introduce an excavator device to “dig” buildings that no longer exist within physical space. This gesture—directed toward emptiness and doomed to futility—constitutes a concretized act of “meaninglessness.”\n作品以增强现实（AR）装置的形式呈现，将已消失的建筑景观重新置回其原始位置。我设置了一台挖掘机装置，去“挖掘”物理空间中并不存在的建筑。这一指向空无的、注定徒劳的动作，本身构成了一种具象化的“无意义”行为。
\n\nWithin the work, the excavator becomes a concrete symbol of entropy. It demolishes, clears, and covers everything, embodying the raw force through which urban development erases the past and imposes new orders. Through the intervention of augmented reality, I attempt to locate a “lost future” in the face of irreversible physical disappearance—a stance of remaining lucid within absurdity, and of continuing to resist forgetting.\n在作品中，挖掘机成为“熵增”的具象化符号。它推倒、清空、覆盖一切，象征着城市发展中抹去过去、强制植入新秩序的原始力量。通过增强现实的介入，我试图在不可逆的物理消逝面前，寻找一种“失落的未来”——一种在荒谬中保持清醒、并持续抵抗遗忘的姿态。`, 
                type: "Video / AR Installation", 
                year: "2025",
                previewImagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FF_2.jpg", 
                detailVisuals: [
                    { label: "Still 1: Dust Motes", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FF_3.jpg" }, 
                    { label: "Still 1: Dust Motes", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FF_2.jpg" }, 
                    { label: "Still 1: Dust Motes", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FF_5.jpg" },  
                    { label: "Still 1: Dust Motes", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FF_1.png" }, 
                    { label: "Still 2: Empty Hallway", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FF_4.jpg" } 
                ],
                backgroundImage: 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FF_1.png', 
                videoLink: "https://youtu.be/CEncCsvKKGw?si=lkHh8o9Xpr9zMnDd" 
            },
            { 
                id: "project-02", 
                title: "NO ONE IS ALLOWED IN_闲人免进", 
                caption: "NO ONE IS ALLOWED IN_闲人免进", 
                description: `\nPerformers encountered a semi-underground space—long, enclosed, and difficult to apprehend at a glance, like a hidden passage.
Its posted regulation of “No Entry” became the point of departure for the work No One Is Allowed In.\n我们发现了一个半地下的空间。它幽长、封闭、难以一眼看清，像是一段被隐藏的通道。\n其“禁止入内”的规定，激发出“闲人免进”的主题。
\nDuring the performance, they established a single rule: whenever two participants encounter one another, they must say “No One Is Allowed In” and immediately reverse their original trajectory.\nThis rule does not serve efficiency or any concrete goal. Instead, it produces interruption, avoidance, and repetition. Bodies are compelled to respond to verbal commands; potential encounters are cancelled, and paths are continuously redirected. Through repeated execution, the space shifts from a neutral site into a perceptual structure shaped by commands, echoes, and bodily reactions.
在表演实施过程中，我们设置了一个规则： 每当两人相遇，必须说出“闲人免进”并且调转原先的行动轨迹。 \n这一规则并不服务于效率或目标，相反，它不断制造中断、回避与重复。身体在空间中被迫回应语言的指令，原本可能发生的接近被取消，路径被反复折返。随着规则的持续执行，空间逐渐从一个中性的场所，转变为由命令、回声与身体反应共同构成的感知结构。
\nThrough this work, artist seeks to examine how space is endowed with meaning through instruction, and how individuals perceive their position within prescribed behavioral logic. Language here functions as a force that intervenes in action and reshapes movement. “No One Is Allowed In” operates both as a refusal and as self-discipline; it addresses the other while continuously turning back toward the self.\nThrough repeated encounters and evasions, the space is re-measured and actions are rewritten, while “entry” itself becomes an act that can never be fully realized.
我们试图探讨空间如何被指令赋予意义，以及个体如何在被规定的行为逻辑中感知自身的位置。语言在此成为一种介入行动、重塑路径的力量。“闲人免进”既是拒绝，也是自我约束；既指向他者，也不断回返到自身。\n在不断重复的相遇与回避中，空间被重新丈量，行动被重新书写，而“进入”本身，成为一件始终无法完成的事情。`, 
                type: "Performance Art", 
                year: "2024",
                previewImagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_1.png", 
                detailVisuals: [
                    { label: "Photo 1: Backs to each other", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_2.png" }, 
                    { label: "Photo 1: Backs to each other", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_12.png" }, 
                    { label: "Photo 1: Backs to each other", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_10.png" }, 
                    { label: "Photo 1: Backs to each other", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_11.png" }, 
                    { label: "Photo 1: Backs to each other", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_5.jpg" }, 
                    { label: "Photo 2: Distance and Shadow", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_4.jpg" } 
                ],
                backgroundImage: 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/NEO_7.png', 
                videoLink: "https://youtu.be/lQHwDO1qSmk?si=oz4Dy6zbBklsKn3j"
            },
            { 
                id: "project-03", 
                title: "THE SQUAD WHO GUARD THE FLAG_护卫队 ", 
                caption: "THE SQUAD WHO GUARD THE FLAG_护卫队", 
                description: `\n\nTen years ago, while visiting the Forbidden City, I accidentally recorded a blurred image with a handheld DV camera. The image itself was indistinct; what remained was a brief phrase spoken by the tour guide—“the squad who guard the flag.” The footage and that phrase together became a persistent anchor in my memory.
十年前，我在故宫游览时，手持 DV 摄像机偶然记录下一段模糊的影像。画面并不清晰，真正留下来的，是导游口中那句简短的称呼——“护卫队”。这段影像与那句话，一同成为我记忆中一个难以移除的锚点。
\nAt the time, I had no expectation that this footage would be rediscovered ten years later.\n当时的我并未想到，这段视频会在十年后被重新找到。
\nIn this work, the Forbidden City is no longer only the Forbidden City. It becomes any space that has been observed and marked; “ten years ago” is no longer a precise temporal point, but a repeatedly designated past. The Forbidden City itself already carries the meaning of the past, while “ten years” as a unit of time holds no inherent significance—it is simply a measure to which we habitually assign value, names, and commemoration. Ten years before and ten years after, one hundred years before and one hundred years after, bear no essential difference on the scale of time. Once a moment is recorded, it simultaneously acquires a sense of permanence and begins to vanish.\n在这件作品中，故宫不再只是故宫，它可以是任何一个被观看、被标记的空间；十年前也不再是一个具体的时间节点，而是一个被不断指认的过去。故宫这一场所本身就承载着“过去”的含义，而“十年”这一时间单位并不具备天然的意义，只是人们习惯于不断为时间赋值、命名和纪念。十年前与十年后，一百年前与一百年后，在时间的尺度中并无本质差别。某个瞬间一旦被记录，既获得了永恒，也同时走向消失。
\nIf the world were merely a structure composed of material, it might have already collapsed into ruins. Images, however, delay decay to a certain extent, temporarily suspending time. They resemble a world caught within time itself.\n如果世界仅仅是由物质构成的结构体，它或许早已化作废墟。但影像在某种程度上延缓了衰败，将时间短暂地悬置。影像如同一个被困在时间中的世界。
\nThrough re-editing and reorganizing these images, and through repeated acts of looking back, the sense of place gradually dissolves. The specificity of the Forbidden City becomes less important; it begins to resemble any of the repeatedly viewed, symbolically charged spaces within memory. What remains clear are only a few words, stripped of their concrete political implications, echoing persistently within consciousness.\n我对这些影像进行重新编排与重组，在不断的回溯中，地方感逐渐消解。故宫的特定性变得不再重要，它更像是记忆中那些被反复观看、不断符号化的空间之一。唯一仍然清晰的，是几个被抽离了具体政治指向的词语，在意识中反复回响。`, 
                type: "Experimental Film", 
                year: "2023-Ongoing",
                previewImagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FLAG_exh3.jpg", 
                detailVisuals: [
                    { label: "Object View: Resin Cast", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FLAG_walking.jpg" },  
                    { label: "Object View: Resin Cast", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FLAG_exh1.jpg" },  
                    { label: "Object View: Resin Cast", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FLAG_exh7.jpg" },  
                    { label: "Object View: Resin Cast", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FLAG_explosion.png" }, 
                    { label: "Text Detail: Embedded Fragment", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FLAG_whisle.png" } 
                ],
                backgroundImage: 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/FLAG_whisle.png', 
                videoLink: "https://youtu.be/F03LG0NyYLU?si=e4i-BwYNkWulletd"
            },
            { 
                id: "project-04", 
                title: "RIVER·TRAIN·FLAME_河流·列车·火焰", 
                caption: "RIVER·TRAIN·FLAME_河流·列车·火焰",
                description: `\n\nMy practice begins with a hypothesis: If suicide is no longer regarded as the end of life, but as the point of departure for two life narratives, how might the story unfold?
This work centers on two figures—the Chinese poet Haizi and Kurt Cobain, the frontman of the American band Nirvana. Through the form of a pseudo-documentary, I construct a fictional narrative space in which two artists from distinct cultural contexts are placed on the same narrative trajectory. Across their texts and inner worlds, I sense a resonance: a longing for freedom, a confrontation with the tension between ideals and reality, and a sustained inquiry into the meaning of life.
我的创作始于一个假设：如果自杀不再被视为生命的终点，而是两段生命叙事的起点，那么，故事将如何展开？\n这件作品围绕两位人物展开——中国诗人海子，与美国乐队 Nirvana 的主唱 Kurt Cobain。我以伪纪录片的方式构建了一个虚构的叙事空间，将两位来自不同文化背景的艺术家置于同一条叙事轨道之中。他们在文本与精神层面呈现出某种共振：对自由的渴望、对理想与现实冲突的感知，以及对生命意义的持续追问.
\nI do not attempt to situate this work within a framework of “Sino–American cultural exchange.” In the process of creation, they function first and foremost as performed roles rather than cultural symbols. It is precisely through this decontextualization that I am able to focus on individual experience itself, and on how life is felt under extreme conditions.\n我并不试图将这件作品归入“中美文化交流”的叙事框架。在创作中，他们首先是被扮演的角色，而非文化象征。正是在这种去语境化的状态下，我得以将注意力转向个体经验本身，以及生命在极端处境中的感受方式。
\nCertain place names and fragments of memory in the work are drawn from existing texts, such as “Delingha” from Haizi’s poetry, and an anecdote about Cobain’s childhood involving an imaginary friend who went to Vietnam. Embedded within the fictional narrative, these details form a memory space suspended between reality and imagination. The train functions as a recurring motif, connecting disparate times, locations, and narrative fragments. Within an unstable narrative flow, it provides a mobile point of reference, allowing the work to be perceived as an ongoing journey.\n作品中的部分地名与记忆碎片源自真实文本，例如海子诗歌中的“德令哈”，以及关于柯本童年时期“虚构朋友前往越南”的叙述。这些细节被嵌入虚构叙事之中，构成一个介于真实与想象之间的记忆空间。我以“列车”作为贯穿始终的意象，将不同的时间、地点与叙事片段串联起来。列车在不稳定的叙事流中提供了一种移动中的参照，使作品整体被感知为一场持续进行的旅程。
\nPerhaps the most striking commonality between Haizi and Cobain is suicide. In this work, however, it is not treated as an ending, but as the narrative’s point of departure. Each sought to reach a state of ecstasy through different means: Cobain pursued psychic liberation through drugs, while Haizi sought spiritual transcendence through the practice of qigong. Both gestures point toward a shared desire for an intensified experience of existence.\n海子与柯本最显著的共同点，或许正是自杀。在这件作品中，它并非终结，而是叙事的起点。他们都试图通过不同方式抵达一种迷狂状态：柯本借助毒品寻求精神的解放，海子则通过修炼气功追求心灵的超脱。共同指向一种对存在强度的渴望。
\nIn my view, suicide is not merely a form of passive escape; it may also be understood as a confrontation with an absurd world—an extreme and contradictory gesture of resistance. Through this work, I attempt to approach the sensation of that resistance itself: how it emerges, how it is experienced, remembered, and narrated. Rather than offering answers, the work invites viewers into a rewritten journey, within which they may sense the tension between life, collapse, and meaning.\n在我看来，自杀并不只是消极的逃离，也可以被理解为对荒谬世界的反抗——一种极端而矛盾的姿态。通过这件作品，我试图靠近这种反抗的感受本身：它如何发生，又如何被经验、被记忆、被讲述。作品并不提供答案，而是邀请观者进入这段被重新书写的旅程，在其中感知生命、崩塌与意义之间的张力。`, 
                type: "Video", 
                year: "2024",
                previewImagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_train_river_.png", 
                detailVisuals: [
                    { label: "Screen Capture: Digital Etching", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_kurtcobain_empty.png" },  
                    { label: "Screen Capture: Digital Etching", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_Dionysus.png" },  
                    { label: "Screen Capture: Digital Etching", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_stand_by_the_river.png" },  
                    { label: "Screen Capture: Digital Etching", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_train_river_.png" },  
                    { label: "Text Fragment: Overheard Line", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_windowview.png" }  
                ],
                backgroundImage: 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/MN_railway.png', 
                videoLink: "https://youtu.be/Fc115SGZ9Tk?si=_KW2m-9dcyTFXE7W"
            },
            { 
                id: "project-05", 
                title: "THE LUNG OF ALGORITHMS_算法肺", 
                caption: "THE LUNG OF ALGORITHMS_算法肺", 
                description: `\n\nAn interactive video based on processing. It originated from a chest X-ray of mine. That was the first time I truly faced my own lungs. Subsequently, I transformed this medical image into a data stream and visual images, enabling the internal state of the body to be re-observed and recreated in the digital dimension.
一个基于processing的交互视频。源于我一次胸部X光检查, 那是我第一次真正直面自己的肺部。随后, 我将这份医学影像转化为数据流与可视化影像, 使身体的内部状态在数字维度中被重新观看与再造。`, 
                type: "Interactive Video", 
                year: "2025",
                previewImagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/The Lung of Algorithms_preview.png", 
                detailVisuals: [
                    { label: "Diagram: System Architecture", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/The Lung of Algorithms_total.png" }, 
                    { label: "Diagram: System Architecture", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/The Lung of Algorithms_white.png" }, 
                    { label: "Still: Mechanical Element", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/The Lung of Algorithms_black.png" }
                ],
                backgroundImage: 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/The Lung of Algorithms_Xray.jpg' 
            },
            { 
                id: "project-06", 
                title: "TO PERCEIVE THUS_如是观", 
                caption: "TO PERCEIVE THUS_如是观", 
                description: `\n\nFire, rain, thunder, and other sounds of nature begin to collapse as someone murmurs indistinctly the things that leap into their mind. A grand ritual unfolds. 
火、雨、雷和其他自然的声音开始消失，因为有人模糊地喃喃自语着跳入他们脑海。一场盛大的仪式展开了。`, 
                type: "Sound Dramaturgy / Experimental Sound", 
                year: "2023",
                previewImagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/EMSOUND_2.png", 
                detailVisuals: [
                    { label: "Print Detail A", path: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/EMSOUND_1.png" }
                ],
                backgroundImage: 'https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/EMSOUND_1.png',
                videoLink: "https://youtu.be/AYm8pYy8168?si=9PiO8BwgpkENOyUY"
            },
        ];

        // =======================================================
        // ========== 3. Log 片段数据 (内容保持完整) ==========
        // =======================================================
        const fragmentsData = [
            { 
                id: "fragment-01", 
                date: "2023-ongoing", 
                title: "Stories of Secondhand Smoke", 
                content: "Stories of Secondhand Smoke",
                sections: [
                    { 
                        title: "Goodbye, Bridge", 
                        content: `I don't want to drown in the downpour,
Endless yearning and reminiscence,
An incurable,
Self-abusive chronic illness,
Etching the shadow of the railing onto the stone,
Becoming a simple cage.
Has anyone said this?
It's safest suspended in the air.
Half a melted ruined bridge,
It fills me with regret,
But I've broken free
From the after-effects of mythological brainwashing.
This is another case of unfulfilled desire,
At least this year it can't be closed.
Ever-expanding inspiration
Leads to self-destruction in the process of explaining itself.
The ending slides into ambiguity.

Oh friend,
You don't understand a joy of mine
Called stopping short after a taste,
Tasteless,
Effortless.
No one cares which way I lean when I walk,
Nor what path I'll take with my eyes covered—
A circle to the left or to the right.

One day I'll walk onto this bridge without pressure,
And end my life on it.
Watching her appear in the middle of the bridge,
Then self-destruct.
At night, someone plays the erhu,
Singing
A fragmented song.

2023.8.23` 
                    },
                    { 
                        title: "Pacific Saury", 
                        content: `Eating a grilled Pacific saury at 3 AM alone
Is pretty satisfying.
Doing inappropriate things at inappropriate times
You'll get used to it.
Already used to it.

After many years,
Closing my eyes, reminiscing,
Though my heart has long questioned
Countless "what ifs."
An overly precocious mind,
Like the skin,
Feels freedom first,
Moves towards decay first.

Clichés are used comfortably,
Few poetic lines remain,
Weathered, etched,
Increasingly like nonsense.
Transparent plastic bags whistle overhead,
Rustling, lighting fires on the river beach.
Together on the ruins,

The moon we sunbathed under, the songs we sang,
The boasts we made, the wishes we wished,
And so much more.

2024.4.14`
                    },
                    { 
                        title: " Loose", 
                        content: `The wind makes bones rustle,

Loose,
The old bicycle gasps for air,
Rust stains on trouser legs.
Necessarily,
A season of growth,
Everything is invading,
Re-occupying what was original.
Just can't bear to part with the long-hoarded
Old spring, just spring.
A fondness for the indescribable arises,
Lingering affection, unresolved,
An undercurrent's fierce surge.

2025.4.7`
                    }
                ]
            },
            { 
                id: "fragment-02", 
                date: "2022-ongoing", 
                title: "On Continuous Motion", 
                content: "The river keeps its promises, always moving away from where it began. I try to be more like the river, less like the stone that holds the bank in place. But gravity, the mundane pull of the known, makes a quiet anchor of the heart. To wander is simply to choose the current.",
                sections: [
                    { 
                        title: " Tushko", 
                        content: `Music as a drug
Has a long history.
Cool breeze through the seaside blanket
Naturally came to an abrupt halt,
Unintentionally, yet intentionally.
Before the second baptism,
I should learn to dance.
Pin up my hair, bare my shoulders,
Train into an elephant.
The room is utterly empty.
One hour and forty minutes
To think of many things.
When the signal of rebirth from ardent thoughts fades,
The rambling of confession
Cooled and made into biscuits to eat.
Sympathy for the elephant,
Or a craving for LSD?

2022.12.28 22:59` 
                    },
                    { 
                        title: "The Sun Emerges From the Rubble Pile", 
                        content: `The sun emerges from the rubble pile,
Breathing out a cloud of white.
Distant things
Are now forever out of sight.
Where in the field's center
Do the ashes burn?
It's unknown to me.
A bird above my head
Has circled three times.
I sit with my back to the sun,
Then turn and walk forward.

2024.1.30` 
                    }
                ]
            },
            { 
                id: "fragment-03", 
                date: "2023-ongoing", 
                title: "An Inventory of Blue", 
                content: "Not the blue of the sky, nor the sea, but the blue found in shadows—under the lip of a chipped ceramic cup, or the vein running across a tired wrist. It is the color of potential and quiet exhaustion, a necessary depth against the bright, insistent clamor of the world.",
                sections: [
                    { 
                        title: " Crocodile", 
                        content: `But all I wanted then was to climb that chimney,
Sit in the winter sun,
And swing my feet.
No one asked me a word,
Nor would I speak.
Holding a foam box of lava cakes,
Sitting on the playground,
Looking for a place to disappear.
Shadows grow tall, run.
Crocodile,
Will it also on an afternoon
Lie by the river, sunbathing,
Carefully dissecting its prey's pain?
Surely one time it will be sincere.
Then gracefully crawl into the water,
Waiting for the next.

2023.1.4` 
                    },
                    { 
                        title: "Releasing a Kite", 
                        content: `Releasing a kite
Before sunset,
On a still discernible
Island.
Following the rhythm of a jingle,
The sun sets from the left of the sea.
Octopuses wave their colorful tentacles,
Ten thousand kinds of blue
Welcome ships arriving, departing.
What do windmills say?
Standing freely,
Asking no one's name,
Facing all day long
Snow-capped mountains, shimmering,
Wrapped in transparent silk.
Clouds will disperse,
No matter how beautiful they once were.

2024.7.11` 
                    },
                    { 
                        title: " Confessional", 
                        content: `We must be light enough to touch heaviness.
We must reach heaviness to feel lightness.
Selectively forget some dreams,
Lose contact with flocks of birds.

2025.4.7` 
                    }
                ]
            },
            { 
                id: "fragment-04", 
                date: "2022", 
                title: "The Unwritten Script", 
                content: "The city writes its own narrative on glass and pavement, a script we merely walk through. I tried to read the subtext of a traffic light changing, but found only the cold logic of repetition. The real story lies in the pause.",
                sections: [
                    { 
                        title: "Sphinx by The Sea", 
                        content: `The acquaintance of men and women was in one morning. The man's friend asked him to meet him at the mall in the city center, and he arrived half an hour early to find that the mall was not open.

Man stands in front of the mall holding an umbrella, the city is cold and humid in winter, and gray as far as the eye can see.

The pigeons in the square are also gray.

He lifted the black nylon umbrella, and the rain was cool on his face.

He stood in front of the traffic light, bored watching the signal light turn from green to red and then to green. No one has ever stepped on a zebra crossing. He walked around the closed gate along the bulky building. The outer shell of the whole building is silver-white metal and tempered glass, which looks like a shell standing by the sea from a distance. It is opposite a bookstore. It is estimated that there are a lot of his books piled up inside.

The side door opened.

He walked smoothly into the side door to the quiet first floor of the mall. The modern design is angular, with two elevators standing in the east and west zones, and four van elevators hanging at the four corners. It's as empty as the palace of an ancient king, and as soon as you look up, you can see the light spilling from the semi-open-air glass roof. Light comes in through the glass curtain wall, dying the white tiled floor a touch of blue.

Suddenly, a sound of footsteps drew his attention to the elevator closest to him.

It was a woman in a long gray coat. Her hair was about an inch above her shoulders and she wore no jewelry.

She walked up the unpowered elevator steps. The movements are slow, arms outstretched, chin raised, as if to ascend to heaven to embrace God.

The man saw her appearance clearly through the reflection of the metal elevator.

- The facial features are plain and do not conform to the beginning of any kind of erotic encounter. However, such encounters are unique enough to write a story.

The man watched as this strange woman walked up the third floor, watched her figure weave through the long corridors, and finally disappeared in front of a store.

The woman runs a perfume shop.

Obviously, this shop did not have any business during the war years. In the same way, his books can't be sold.

At first, the conversation was polite , and soon the woman found that the man was too boredCome in to pass the time. However, anyway, the business is not good, no one comes to the door, and she also wants to find someone to talk to.

The man had never been in a perfume shop before. He's just a poor writer. To be honest, he has a bit of contempt for perfume and a bit of curiosity.

He has never liked perfumers, men and women. He has always advertised that beautiful things must be real and simple, like the art of ancient Greek times. Ever since he studied Greek in college, he has fallen uncontrollably into the cult of ancient Greek culture.

Women are noncommittal about men's opinions.

She's seen so many people of all stripes, many of whom are as prejudiced as men. It's just that those men always have women by their side. Their role in publicizing bias is to pay.

The man paused when the woman asked him what industry he was in, and then said that he was a writer, writing some novels for magazines and some poetry. A few books were published, but they didn't sell well.

The woman smiled, and then she told him that the nature of their work was not much different.

The man asked her why. The woman told him that books or perfumes were just means of whitewashing and packaging vulgar cores.

No amount of perfume can hide the blood, and no amount of good books can eliminate human stupidity.

A group of people in suits and leather shoes sat at long tables, watching the world slowly become devastated.

As she said these words, the woman's head shook slightly, and her hair brushed her cheeks. The man had the urge to pin this damn hair behind her ear with a hairpin.

A man is not good at words, he is a writer rather than an orator.

When he was with her, he was always clumsy, and the symptoms of intermittent aphasia flared up when he looked at her. Maybe give him a pen and he can better express his opinion.

The woman's mind is sometimes radical, reminiscent of a steel beast whizzing over the city.

He asked her why, when she was in the elevator, she hugged the air with her hands in a gesture of mercy for the world, as if praying for the victims of war. And she always avoided the question. In fact, she doesn't believe in anything, including God.

The woman found a bed from the shop next doorBlankets that customers don't want.

On cold and cold winter days, sneak in the mall all night without anyone finding out. They hugged the blanket and said innocuous things. Again and again small talk made them quickly become more familiar with each other than the average person.

It was getting late.

He's coming.

They hid in blankets, surrounded by warm darkness. The woman rests her head on the man's shoulder and they tell each other their stories.

Wind, wind, endless wind. The woman said.

The sweet wind on the field as a child, it was dry and peaceful, softly passing between the arms. It passed through the blue-tiled and white-walled house, witnessing from outside the curtain that she was still asleep and was awakened by the scent of breakfast.

Women often go downstairs with sleepy eyes half open and wearing two socks of different colors. Usually one is white dotted on a blue background, and the other is orange striped.

The doorbell will ring in an hour. The wind rode with her from home to school, hidden in the sleeves of her tracksuit, bulging like a sail.

Women's long hair and bows flutter in the wind, shadows hide behind telephone poles, and watch puppies snore on the haystacks.

The man is talking about light. All kinds of light.

The reflection of sea lions' fur in the amusement park pond, the sunlight shining through the boulevard at three o'clock in the afternoon, the flashing of night flight aircraft signals. He told the woman that he had bought a three-color cup of ice cream in the freezer at the airport convenience store in the winter, and when he opened it, he found that it did not smell of chocolate. He was a middle school student at the time, obsessed with Thoreau's Walden.

The lights in the plane were warm and dim, but he was still cold. He asked the flight attendant for a blanket that looked like chocolate.

There is fire in their stories.

They talked about it with the same sense of fear and excitement.

Fear comes from the pain of destruction, and excitement comes from the joy of destruction.

The fire that the woman sees is blue. Not the bright blue of the flames on a gas stove, but the blue of the ink.

It could be the blue of the sea, the man thought, or the color of the blue ink he used to write - he had always been accustomed to writing in blue ink. His manuscripts were neatly bundled together and locked in a chest of drawers in the corner of his roomVillage.

The man said his flame could not see shapes, only sounds. It is like tens of thousands of concert halls playing symphonies, which are huge and noisy.

The woman said her flame was cold, and the man said her flame was hot.

Whatever their fire looks like, it's just as sad to remember. The fire of memories burns out, leaving only ashes, and there is no burning process, and there is no fear and excitement. No one will have a fear of white ashes.

The flames dance, the fire of men, the fire of women.

They were wrapped in blankets as warm as the sea and watched them burn from the air. They don't remember why they are sad.

There was a sudden silence between them, a warm dark silence.

In silence, the man said he remembered a year when his university hosted a celebration with champagne, fountains, Ionic marble columns.

And tuxedos, poetry, accordion, women say casually. Aren't all college parties like this?

Maybe we can unfold an imagination, the man said.

We used to dance the same dance at the same event at the same university, but your dance partner is not me, and my dance partner is not you.

We turned our backs to each other, circled three hundred and sixty degrees to the accompaniment of the violin, and then turned our backs again.

The woman asked him why he didn't arrange them as a dance partner.

In that case, he said, we would lose the motivation to pursue each other. Encounters that are too easy often lead to unsatisfactory endings.

A cruel romance, isn't it?

When he woke up, he took her to the exhibition hall next to the bookstore to see the paintings.

The pavilion is made up of long, narrow and curved corridors that cannot be seen as far as the eye can see.

They stopped and walked in the open corridors.

None of them are art lovers, just a lively watch. He stared at the woman for a long time in the dim and faint light of the pavilion. His gaze wandered from her short hair to her neck, to her shoulders, to her back, to her chest, to her waist, to her legs, to her ankles, to her feet.

She always wears a silver paperclip at the neckline of her shirt, she wears flat shoes, and she never wears perfume.

When I left the exhibition hall, it was raining heavily outside. The gray city fades to the pale on a rainy day.

Rain washingWash away all traces of depression and make them clearer. They walked in an overwhelming white. The woman's face blurred in the heavy rain, and the man was surprised to find that at this moment she became incomparably beautiful: her hair dripped with water, blending with her facial features into a hazy watercolor painting.

They clasped their fingers across empty crosswalks, through the parkland where pigeons once roosted, and through flashing traffic lights.

The city becomes a game of chess, and the chess players are so bad that nothing can stop them except the roar of wind and rain. The newsagents on the street were closed and they had no outside news.

All they know is that the war is not over.

The day before the New Year, half of the building opposite the man's house was blown down. The steel bars twisted abruptly in the humid air, and they protested to the surviving buildings.

The man got up and went to the bathroom to freshen up.

He realized that he had not felt the noise of the road, the crowd and the sound of all warm life for a long time.

The roar of the bombers at night tortured him almost mentally, and the frequent bouts of headaches were about to tear him apart.

But this day he felt light. He longed to escape this damn environment, to destroy, to touch the scars of the building and feel the heat of the gunfire, rather than to be imprisoned in this lifeless place.

The man took all his poems and novel manuscripts from the chest of drawers, sorted them out and stuffed them into an army-green canvas bag. He put on his best outfit—a college-era gown—and walked out the door with his bag on his back.

Tomorrow is the New Year, and something commemorative should be done.

He walked through the empty square and into the waterlogged underground passage. The corners of the walkways are covered with moss, and the once bright posters on the walls are yellowed and mottled.

He walked through here like walking into a biographical film featuring him.

Time and space lost their concept in the narrow darkness, and many images flashed through his mind. He saw him reading poetry at college dances; He saw him running like a boy across the avenue full of poplars; He saw him as a child holding a marshmallow and trying to feed it to a sea lion.

He also saw women。 The woman sat quietly on a white plastic chair listening to him read a poem, with a yellow spring flower pinned to her chest; Woman riding a bicycle across the field, ribbons flying on straw hats; Woman wearing floral dress playing a game of snares.

The underground passage is a gallery where no paintings are exhibited.

What is exhibited here is not painting, but memory and illusion. The reflected water of the Yongdao flows everywhere, giving people的 illusion that their lives were once tightly intertwined. Illusions invade reality through memory. The stagnant water reflects the thin figure of the man, like white wax oil floating on the surface of the water.

The man walked out of the passage to the exhibition hall and stopped in front of a painting. He reached out and gently removed it from the wall, then used a knife to remove the frame, rolled up the canvas and stuffed it into a canvas bag.

His footprints took away the floating ash on the ground and ghostly footprints on the floor of the white Dali rock.

Men stood on the sidewalk and waited until the woman emerged from the corner of the street.

In the afternoon, the sky cleared.

The sunlight peeked out from behind the clouds for a long time, and this kind of good weather is rare in rainy cities. Men and women walked up zebra crossings, crossed intersections, walked over overpasses, and they came to the park to find that a gray pigeon was missing.

The woman suggested that they take a run around the park, so the man put his canvas bag under a cherry tree and ran with his legs open.

It was warm and at first he felt his joints rust, but the sunlight acted as oil, and soon he was walking like a fly.

Once he overtook the woman, he stopped in front of him and waited for her to catch up.

They chase and frolic like eight- or nine-year-old children.

The sunlight turns into scalding gold water, which paints the envelope of memory. For a moment, the man felt that this scene had a kind of fatalistic magic. He felt the wind, felt the softness of its cheeks like a ribbon a girl used to tie her hair, he felt the light, felt the sparkle it cast among the leaves like a bell hanging from a bicycle.

I can't tell which moment he felt that he and the woman were like an illusion born of a lonely city for too long, and it used all its strength to intertwine their fate.

They sat resting on the curb as the woman watched the man pull a manuscript fromTaking it out of her bag and handing it to herself, she took his latest work and read it carefully, not missing a single grammatical error.

The man looked at the woman's face quietly as usual, as he did every time he listened to her.

After reading the manuscript, he and she walked hand in hand on the road as the sunset faded. Through the gap between the tall buildings, a huge sun was cut to pieces.

Her eyes are orange, her face is orange, and her whole person is orange.

The ruins seemed far away from them, and he and she held hands and tread the mixed orange and dark blue road. The sunset is covering the sky, and it weaves the most beautiful robe for the funeral at sunset. She suddenly started singing a song, a song much older than them. Reminiscent of a rusty gramophone.

It was a song that belonged to a previous era. It is calm and tranquil, without the slightest stain of war, clean and pure like the newborn sun.

The woman asks the man to invite her to dance.

They danced the dances they had learned in college, and the canvas bag on the man's back slapped his back, and he was panting after a while. Even so, he refused to take off his backpack. The heavy load on his back made him feel real—he desperately needed external forces to prove that the moment was real.

- His joy, his dancing steps, the rapid dimming sunset and the smile on the woman's face are all real.

He and the woman jumped until the sun went down.

They returned to the mall and the man asked the woman to invite him to climb the elevator.

They stood on stationary elevator steps, one up and one down. They close their eyes on the elevator and play Jesus Christ in a vain attempt to save the distant but ubiquitous suffering.

Eventually, they hugged together, her chin resting on his shoulder, and the man was like holding a bouquet of flowers from heaven. The heartbeat of a man and the heartbeat of a woman coincided, like a solemn bell ringing through the glass dome.

The rough and soft texture of the coat and wool fabric between the man's fingers made him irresistibly recall the nights when he embraced women. The material of the coat and blanket is far from the same, but the body temperature at the mouth of the heart is the same, and the warm body under the clothes is the same, even she lies on her shouldersThe angle of the head is exactly the same.

They do not believe in God, only in each other's existence.

On this unlit night, they climbed the elevator and carried the blanket to the top floor. The mall stands quietly, like a seashell by the sea.

They looked down from above, and under their feet was a lifeless city. Under the surface of the sea at night, the ruins are like a hideous skeleton, extending in all directions.

It's too cold, make a fire.

Did the woman say that first? Or your own decision?

The man didn't know, but he took out a lighter and tried to make a fire with a few pieces of waste wood.

It is impossible to ignite the wood directly. The man thought for a moment, turned out all the manuscript papers in his bag, and spread them out on the wood one by one. Seeing him doing this, the woman raised her eyebrows and didn't say a word. She understood what he meant. She knew they were all people who rarely thought about the consequences.

Some things may never be given a chance if not done in time.

She turned and got off the elevator, and soon came up with a paper bag. At this time, the man lit the fire, and the white manuscript paper and the blue ink on it finally moved the pieces of wood.

The woman took out the perfume bottle in the paper bag and smashed it with a red brick.

The aroma diffuses in the night breeze. The woman says it's her favorite flavor. The alcohol component of perfume makes the flame burn even stronger.

The man took out the painting, which showed the blue sea. He asked the woman if she had seen the color of the flames.

The sea water tumbled in the heat of the flames, with the white of the manuscript paper and the smell of perfume. They threw a part of each of them into the fire, and this was their common flame.

He threw the painting into the fire with her.

The painting wrinkled and softened in the flames, it melted little by little, turning to ashes along with their shadows. New Year's music sounded on the city radio, and cheerful accordion played a dance song.

The man took off his rucksack and took the woman's arm to invite her to dance. No longer trying to feel the reality with his weight, he wrapped his arms around the woman's waist and turned lightly in circle after circle. Three hundred and sixty degrees, seven hundred and twenty degrees, one thousand and eighty degrees...

The flames burned more and more, and their figures twisted and rose in the flames, as if they were free Genie of the night. In dance, everything lost will be found, and all chases will find the answer.
\n2022.3.12
`
                    }
                ]
            },
        ];

        const pageDescriptions = {
            home: { title: "Home", content: renderHome },
            works: { title: "Works / Projects", content: renderWorks },
            feed: { title: "Field Notes", content: renderFeed },
            writing: { title: "Journal & Fragments", content: renderWriting },
            store: { title: "Small Objects", content: renderStore },
            about: { title: "Artist Statement", content: renderAbout },
        };

        // (Utility Functions, Page Rendering Functions 保持不变)

        // Simple debounce for resize/scroll listeners
        const debounce = (func, delay) => {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), delay);
            };
        };
        
        // NEW: Function to update the content of the right-hand preview panel for 'Works'
        function updateProjectPreview(projectId) {
            const previewDiv = document.getElementById('works-preview');
            if (!previewDiv) return;

            const project = projectsData.find(p => p.id === projectId);
            if (!project) return;
            
            // Deactivate all titles
            document.querySelectorAll('.works-index button').forEach(btn => btn.classList.remove('active-project'));
            // Activate the current title
            const activeBtn = document.querySelector(`.works-index button[data-project-id="${projectId}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active-project');
            }

            // --- 编辑点 A：替换预览图占位符 ---
            // 预览图路径来自 projectsData[n].previewImagePath
            const previewHtml = `
                <div class="preview-content show reveal">
                    <div class="preview-meta">${project.type} | ${project.year}</div>
                    <div class="preview-thumbnail">
                        <img src="${project.previewImagePath}" alt="Visual Preview for ${project.title}">
                    </div>
                    <p class="preview-caption">${project.caption}</p>
                    <button class="back-button" onclick="navigate('works/${project.id}')" style="margin-bottom:0;">View Full Details →</button>
                </div>
            `;
            
            // Clear old content with a fade-out effect for smoothness
            const oldContent = previewDiv.querySelector('.preview-content');
            if (oldContent) {
                oldContent.classList.remove('show');
                setTimeout(() => { previewDiv.innerHTML = previewHtml; }, 100); // Wait for fade-out before injecting new content
            } else {
                previewDiv.innerHTML = previewHtml;
            }
        }


        // --- Home Background Cycle Logic (New) ---

        function cycleHomeBackground() {
            // 确保只有一个定时器在运行
            if (homeBackgroundCycleInterval) {
                clearInterval(homeBackgroundCycleInterval);
            }
            
            const images = backgroundImages['home'];
            if (!images || images.length === 0) return;

            // 首次设置背景图（用于初始亮起效果）
            if (!bgDiv.style.backgroundImage) {
                bgDiv.style.backgroundImage = `url('${images[currentHomeBgIndex]}')`;
                bgDiv.classList.add('home-bg-filter'); 
                bgDiv.style.opacity = 0; // 确保从黑场开始
                
                // 初始亮起效果 (6秒)
                setTimeout(() => {
                    bgDiv.style.transition = 'opacity 1s ease'; 
                    bgDiv.style.opacity = 0.9;
                }, 50); 
            }

            const totalDuration = 6000; // 8 seconds total cycle
            const fadeOutDuration = 1500; // 2 seconds fade out to black

            // 设置循环，每 8 秒执行一次
            homeBackgroundCycleInterval = setInterval(() => {
                
                // 1. 设置 2秒快速淡出
                bgDiv.style.transition = `opacity ${fadeOutDuration / 800}s ease`;
                bgDiv.style.opacity = 0; // 开始淡出（变黑）
                
                setTimeout(() => {
                    // 2. 更换图片 URL
                    currentHomeBgIndex = (currentHomeBgIndex + 1) % images.length;
                    const nextImagePath = images[currentHomeBgIndex];
                    
                    // 预加载下一张图片
                    const tempImg = new Image();
                    tempImg.onload = () => {
                        bgDiv.style.backgroundImage = `url('${nextImagePath}')`;

                        // 3. 设置 6秒缓慢淡入
                        bgDiv.style.transition = `opacity ${(totalDuration - fadeOutDuration) / 3000}s ease`;
                        bgDiv.style.opacity = 0.9; // 开始淡入（变亮）
                    };
                    tempImg.src = nextImagePath;

                }, fadeOutDuration);

            }, totalDuration);
        }

        // NEW: 切换作品图片 (来自代码 1)
        function switchProjectImage(projectId) {
            const project = projectsData.find(p => p.id === projectId);
            if (!project || !project.detailVisuals || project.detailVisuals.length === 0) return;
            
            // 增加索引
            currentProjectVisualIndex = (currentProjectVisualIndex + 1) % project.detailVisuals.length;
            
            const imgElement = document.getElementById('active-project-img');
            const counterElement = document.getElementById('project-img-counter');
            
            if (imgElement) {
                // 简单的淡出淡入效果
                imgElement.style.opacity = 0.5;
                setTimeout(() => {
                    imgElement.src = project.detailVisuals[currentProjectVisualIndex].path;
                    imgElement.onload = () => { imgElement.style.opacity = 1; };
                }, 100);
            }
            
            if (counterElement) {
                counterElement.innerText = `${currentProjectVisualIndex + 1} / ${project.detailVisuals.length}`;
            }
        }

        // NEW: 提取 YouTube ID (来自代码 1)
        function getYouTubeVideoId(url) {
            if (!url) return null;
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function updateProjectPreview(projectId) {
            const previewDiv = document.getElementById('works-preview');
            if (!previewDiv) return;

            const project = projectsData.find(p => p.id === projectId);
            if (!project) return;
            
            document.querySelectorAll('.works-index button').forEach(btn => btn.classList.remove('active-project'));
            const activeBtn = document.querySelector(`.works-index button[data-project-id="${projectId}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active-project');
            }

            // --- 编辑点 A：替换预览图占位符 ---
            // 预览图路径来自 projectsData[n].previewImagePath
            const previewHtml = `
                <div class="preview-content show reveal">
                    <div class="preview-meta">${project.type} | ${project.year}</div>
                    <div class="preview-thumbnail">
                        <img src="${project.previewImagePath}" alt="Visual Preview for ${project.title}">
                    </div>
                    <p class="preview-caption">${project.caption}</p>
                    <button class="back-button" onclick="navigate('works/${project.id}')" style="margin-bottom:0;">View Full Details →</button>
                </div>
            `;
            
            const oldContent = previewDiv.querySelector('.preview-content');
            if (oldContent) {
                oldContent.classList.remove('show');
                setTimeout(() => { previewDiv.innerHTML = previewHtml; }, 100);
            } else {
                previewDiv.innerHTML = previewHtml;
            }
        }
        
        // --- Render Functions (恢复旧版所有页面渲染) ---

        function renderHome() {
            // ** 移除 Home 页面中央文本 **
            return `
                <section id="home">
                    <div class="light-blur"></div>
                    <div class="hero-text reveal">
                        </div>
                    </section>
            `;
        }
        
        function renderWorks() {
            const indexHtml = projectsData.map((p, index) => `
                <button 
                    class="reveal" 
                    data-project-id="${p.id}"
                    onclick="navigate('works/${p.id}')"
                    onmouseover="updateProjectPreview('${p.id}')"
                    style="transition-delay: ${index * 0.05}s;"
                >
                    <h3 class="works-index-title">${p.title}</h3>
                </button>
            `).join('');

            const initialPlaceholderHtml = `
                <div class="preview-content show reveal" style="transition-delay: 0.1s;">
                    <div class="preview-meta">Hover over a project title to view a brief description.</div>
                    <div class="preview-thumbnail">
                        <span class="en-text" style="color: rgba(255, 255, 255, 0.3);">Project Visual Preview</span>
                    </div>
                    <p class="preview-caption" style="opacity: 0.5;">
                        Select a project from the left index to see the full details page.
                    </p>
                </div>
            `;

            return `
                <section id="works">
                    <div class="section-header">
                        <h2>WORKS / PROJECTS</h2>
                    </div>
                    <div class="works-container">
                        <div class="works-index">
                            ${indexHtml}
                        </div>
                        <div class="works-preview" id="works-preview">
                            ${initialPlaceholderHtml}
                        </div>
                    </div>
                </section>
            `;
        }
        
        // NEW: renderProjectDetails (Works 详情页 - 包含图片轮播和视频嵌入)
        function renderProjectDetails(projectId) {
            const project = projectsData.find(p => p.id === projectId);
            if (!project) { return `<section id="project-detail"><p class="p-serif">Project not found.</p></section>`; }
            
            // 重置图片索引
            currentProjectVisualIndex = 0;
            const firstImage = project.detailVisuals && project.detailVisuals.length > 0 ? project.detailVisuals[0].path : '';
            const totalImages = project.detailVisuals ? project.detailVisuals.length : 0;
            
            // 处理 YouTube 嵌入
            const videoId = getYouTubeVideoId(project.videoLink);
            const videoEmbedHtml = videoId ? `
                <div class="video-container reveal" style="transition-delay: 0.2s;">
                    <iframe src="https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
            ` : '';

            return `
                <section id="project-detail" class="reveal">
                    <button class="back-button" onclick="navigate('works')">← Back to Projects Index</button>
                    
                    <div class="project-split-view">
                        <div class="visual-col">
                            ${firstImage ? `
                            <div class="gallery-wrapper reveal" style="transition-delay: 0.1s;">
                                <img id="active-project-img" class="gallery-image" src="${firstImage}" alt="${project.title} detail">
                                
                                <div class="image-counter" id="project-img-counter">1 / ${totalImages}</div>
                                
                                <div class="gallery-nav-overlay" onclick="switchProjectImage('${project.id}')">
                                    <div class="gallery-arrow">Next Image →</div>
                                </div>
                            </div>
                            ` : ''}
                            
                            ${videoEmbedHtml}
                        </div>

                        <div class="text-col reveal" style="transition-delay: 0.3s;">
                            <div class="project-meta-info">
                                <span>${project.type}</span> | <span>${project.year}</span>
                            </div>
                            <h2 class="project-title">${project.title}</h2>
                            <div class="project-description-content" style="margin-top: 2rem;">
                                ${project.description}
                            </div>
                        </div>
                    </div>
                </section>
            `;
        }

        function renderFeed() {
            const posts = [
                { date: "Dec 01, 2025", time: "14:30", type: "Image/Text", content: "The paramecium number on the road lives my fake Big Bang of the universe.", imagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/boom.png" },    
                { date: "Nov 28, 2025", time: "10:00", type: "Text", content: "The world is not purely black or white. Keep asking until the fervor fades away. Wait for the weather to clear before deciding to return to the rafting excursion. It's as if we're eagerly awaiting a holiday that's bound to come." },
                { date: "Nov 15, 2025", time: "18:45", type: "Video Still", content: "The World to Me.", imagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/theworldtome_2.jpeg" },
                { date: "Oct 22, 2025", time: "12:00", type: "Object", content: "The shape of ash...the relic of a city.", imagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/ICEGROUP_2.png" },
            ];

            const postHtml = posts.map((p, index) => `
                <div class="feed-post reveal" style="transition-delay: ${index * 0.1}s;">
                    <div class="feed-header">
                        <span class="feed-type">${p.type} — ${p.date} ${p.time}</span>
                    </div>

                    ${p.imagePath ? `
                    <div class="feed-visual-placeholder">
                        <img src="${p.imagePath}" alt="Visual for ${p.content.substring(0, 30)}" loading="lazy">
                    </div>
                    ` : ''}

                    <div class="feed-body">
                        <p class="p-serif" style="font-size: 1rem;">${p.content}</p>
                    </div>
                </div>
            `).join('');

            return `
                <section id="feed">
                    <div class="section-header">
                        <h2>FIELD NOTES / CURRENT OBSERVATIONS</h2>
                    </div>
                    <div class="feed-container">
                        <div class="feed-grid">
                            ${postHtml}
                        </div>
                    </div>
                </section>
            `;
        }

        function renderWriting() {
            const writingHtml = fragmentsData.map((f, index) => `
                <button class="journal-entry-card reveal" onclick="navigate('writing/${f.id}')" style="transition-delay: ${index * 0.1}s;">
                    <div class="entry-title-wrap">
                        <span class="entry-date">${f.date}</span>
                        <h3 class="entry-title">${f.title}</h3>
                    </div>
                    <span class="read-more">Read Entry →</span>
                </button>
            `).join('');

            return `
                <section id="writing">
                    <div class="section-header">
                        <h2>JOURNAL / FRAGMENTS</h2>
                    </div>
                    <div class="journal-container">
                        ${writingHtml}
                    </div>
                </section>
            `;
        }

        function renderWritingDetails(fragmentId) {
            const entry = fragmentsData.find(f => f.id === fragmentId);

            if (!entry) {
                return `<section id="fragment-detail"><p class="p-serif">Entry not found.</p></section>`;
            }
            
            // 构建目录 HTML
            const directoryHtml = (entry.sections || []).map((section, index) => `
                <button 
                    class="directory-item reveal" 
                    style="transition-delay: ${index * 0.05}s;" 
                    onclick="navigate('writing/${entry.id}/${index}')"
                >
                    ${section.title}
                    <span style="font-size: 0.8rem; color: var(--text-muted);">View Section →</span>
                </button>
            `).join('');

            return `
                <section id="fragment-detail" class="reveal">
                    <button class="back-button" onclick="navigate('writing')">← Back to Journal Index</button>
                    <div class="detail-header">
                        <span class="entry-date" style="display:block; margin-bottom: 0.5rem;">${entry.date}</span>
                        <h3 style="font-size: 3rem; font-style: italic;">${entry.title}</h3>
                    </div>
                    <div class="detail-body" style="max-width: 50ch; margin-top: 3rem;">
                        <p class="p-serif">
                            // Journal Abstract: ${entry.content.substring(0, 150)}...
                        </p>
                        
                        <div class="journal-directory">
                            <h3 style="font-size: 1.2rem; margin-bottom: 1rem; color: var(--text-muted); text-transform: uppercase; font-family: var(--font-sans);">Contents / Catalogue</h3>
                            ${directoryHtml}
                        </div>

                        <div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                            <p class="en-text" style="font-size: 0.9rem; color: var(--text-muted);">
                                // Note: This fragment is part of the ongoing 'Field Notes' collection.
                            </p>
                        </div>
                    </div>
                </section>
            `;
        }
        
        function renderWritingSection(fragmentId, sectionIndex) {
            const entry = fragmentsData.find(f => f.id === fragmentId);
            const section = entry && entry.sections && entry.sections[sectionIndex];
            
            if (!entry || !section) {
                return `<section id="fragment-section-view"><p class="p-serif">Text section not found.</p></section>`;
            }

            return `
                <section id="fragment-section-view" class="reveal">
                    <button class="back-button" onclick="navigate('writing/${entry.id}')">← Back to '${entry.title}' Contents</button>
                    
                    <div class="detail-header">
                        <h2 style="margin-bottom: 0.5rem; color: var(--text-muted);">${entry.title}</h2>
                        <h3 style="font-style: italic; font-weight: 300;">${section.title}</h3>
                        <span class="entry-date" style="display:block; margin-top: 0.5rem;">${entry.date}</span>
                    </div>
                    
                    <div class="detail-body" style="margin-top: 2rem;">
                        <div class="text-content-body reveal" style="transition-delay: 0.1s;">
                            <pre>${section.content}</pre>
                        </div>
                    </div>
                </section>
            `;
        }
function renderStore() {
            // ** 优化后的商品数据，包含图片路径 **
            const products = [
                { 
                    name: "Cigarette earrings", 
                    price: "80 RMB", 
                    caption: "I collect the cigarette butts and make them into earrings. 200MM*50MM",
                    imagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/STORE_earings.jpg" 
                },
                { 
                    name: "ICE CUBE", 
                    price: "50 RMB", 
                    caption: "Small ice cubes tring to keep the shape of ash. 200MM*200MM*100MM",
                    imagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/STORE_ICE_3.jpg" 
                },
                { 
                    name: "Stillness Object (Hand-cast Resin)", 
                    price: "30 RMB", 
                    caption: "Use resin to preserve pigments or other small items as archives. Changeable sizes",
                    imagePath: "https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/STORE_BG_ICEGROUP_1.png" 
                },
            ];

            const productHtml = products.map((p, index) => `
                <div class="product-card reveal" style="transition-delay: ${index * 0.1}s;">
                    <div class="product-thumb">
                        ${p.imagePath ? `<img src="${p.imagePath}" alt="${p.name}" loading="lazy" />` : `<span style="font-size:1.5rem;">${p.name.split(':')[0].trim()}</span>`}
                    </div>

                    <div class="product-info">
                        <h3>${p.name}</h3>
                        <p class="en-text" style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">${p.caption}</p>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <span class="product-price">${p.price}</span>
                            <button class="buy-button" onclick="showAlert('Please contact the artist<br>请联系艺术家')">Inquire / Buy</button>
                        </div>
                    </div>
                </div>
            `).join('');

            return `
                <section id="store">
                    <div class="section-header">
                        <h2>STORE / OBJECTS</h2>
                        <p class="en-text" style="font-size:1rem; color:var(--text-color); margin-bottom:0;"
                    </div>
                    <div class="store-grid">
                        ${productHtml}
                    </div>
                </section>
            `;
        }

        function renderAbout() {
            // ** 集成新的个人简介文本 **
            const bioText = `<p class="p-serif">Cao Xinran is currently studying at the Institute of Creativity and Innovation, Xiamen University. \nHer practice spans video, installation, performance, archival materials, and augmented reality. \nShe is passionate about observing and exploring daily life and past memories, navigating a state of "free-flowing contemplation" through visual media and writing.<p class="p-serif">曹欣然目前就读于厦门大学创意与创新学院。创作涵盖影像、装置、行为、档案材料与增强现实。她热衷于观察和探索日常生活和过去的记忆，通过视觉媒体和写作来驾驭一种“自由流动的沉思”状态。\n她试图捕捉过去模糊的片段和当下微妙的、容易被忽视的时刻。
                <p class="p-serif">Her works focus on the suspension of time—those moments that linger, repeat, or cannot be concluded. \nIn her work THE EXCAVATOR, disappearance does not signify an end, but rather a starting point for constant return.<p class="p-serif">她关注时间的悬置——那些停留、重复、无法结束的时刻。
                <p class="p-serif">Remaining in absence, remaining in the unfinished space, remaining in actions doomed to be in vain.\n停留在缺席之中，停留在未完成的空间里，停留在注定徒劳的行动中。
            `;

            return `
                <section id="about">
                    <div class="section-header">
                        <h2>ABOUT</h2>
                    </div>
                    <div class="about-inner reveal">
                        <div class="about-content">
                            <div class="artist-portrait">
                                <img src="https://media.githubusercontent.com/media/caoxinran119/Xinran_online_portfolio/main/images/portrait_xinran_orange.jpg" alt="Cao Xinran Portrait" style="object-fit: cover; width: 100%; height: 100%; display: block;">
                            </div>

                            <div class="statement-text">
                                <h3>CAO Xinran
                                </h3>
                                <div class="project-description-content" style="margin-top: 1.5rem; max-width: 100%;">
                                    ${bioText}
                                </div>

                                <div class="contact-info">
                                    <h3 style="font-size:1.5rem; margin-bottom:0.8rem; font-style:normal; font-family:var(--font-sans); text-transform:uppercase;">Contact</h3>
                                    <p class="en-text" style="font-size:1rem; color:var(--text-color);">Email: <a href="mailto:3020587335@qq.com" style="color:var(--text-color);">3020587335@qq.com</a></p>
                                    <div class="social-links" style="margin-top:1rem;">
                                        <a href="https://www.instagram.com/xinran_pinocchio" target="_blank">@xinran_pinocchio (Instagram)</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `;
        }

        // --- Core Navigation and Init ---

        function navigate(path, skipHistory = false) {
            const parts = path.split('/');
            const pageKey = parts[0]; // 'works', 'home', 'writing', etc.
            const subKey = parts[1]; // 'project-01', 'fragment-02', etc.
            const subSubKey = parts[2]; // '0', '1', '2' (section index)

            const isProjectRoute = (pageKey === 'works' && subKey);
            const isFragmentIndexRoute = (pageKey === 'writing' && subKey && !subSubKey);
            const isFragmentSectionRoute = (pageKey === 'writing' && subKey && subSubKey);
            
            if (!pageDescriptions[pageKey] && !isProjectRoute && !isFragmentIndexRoute && !isFragmentSectionRoute) return;

            // 1. 停止 Home 幻灯片循环
            if (homeBackgroundCycleInterval) {
                clearInterval(homeBackgroundCycleInterval);
                homeBackgroundCycleInterval = null;
            }
            // 移除 Home 特殊滤镜类
            bgDiv.classList.remove('home-bg-filter'); 

            // Update active state in nav links
            document.querySelectorAll('.nav-links button').forEach(btn => {
                btn.classList.remove('nav-highlight');
                const btnText = btn.innerText.toLowerCase();
                if (btnText === pageKey || 
                    (pageKey === 'works' && btnText === 'works') || 
                    (pageKey === 'writing' && btnText === 'writing')) {
                    btn.classList.add('nav-highlight');
                }
            });

            currentPage = pageKey;
            let contentHtml = '';
            let titleText = '';
            let targetBgPath = null;
            let targetOpacity = 0.3; 
            let targetFilter = 'grayscale(60%) brightness(0.85)'; 

            if (pageKey === 'home') {
                targetOpacity = 0.4;
                targetFilter = 'grayscale(60%) brightness(0.5)';
                contentHtml = renderHome(); 
                bgDiv.style.transition = 'opacity 1s ease'; // 添加这一行：强制设置浮现速度为 1秒
    cycleHomeBackground();
            }
            else if (pageKey === 'works' || isProjectRoute) {
                targetOpacity = 0.25; 
                targetFilter = 'grayscale(80%) brightness(0.8)'; 
                if (subKey) {
                    contentHtml = renderProjectDetails(subKey);
                    const project = projectsData.find(p => p.id === subKey);
                    titleText = project ? `Works / ${project.title}` : 'Works / Project Details';
                    targetBgPath = project && project.backgroundImage ? project.backgroundImage : backgroundImages['works'];
                } else {
                    contentHtml = renderWorks();
                    titleText = pageDescriptions[pageKey].title;
                    targetBgPath = backgroundImages[pageKey];
                }
            } else if (pageKey === 'writing' || isFragmentIndexRoute || isFragmentSectionRoute) { 
                if (isFragmentSectionRoute) {
                    contentHtml = renderWritingSection(subKey, subSubKey);
                    const entry = fragmentsData.find(f => f.id === subKey);
                    const sectionTitle = entry && entry.sections[subSubKey] ? entry.sections[subSubKey].title : 'Section';
                    titleText = entry ? `Journal / ${entry.title} / ${sectionTitle}` : 'Journal / Fragment';
                    targetBgPath = backgroundImages['writing']; 
                } else if (isFragmentIndexRoute) {
                    contentHtml = renderWritingDetails(subKey);
                    const entry = fragmentsData.find(f => f.id === subKey);
                    titleText = entry ? `Journal / ${entry.title}` : 'Journal / Fragment';
                    targetBgPath = backgroundImages['writing']; 
                } else {
                    contentHtml = renderWriting();
                    titleText = pageDescriptions[pageKey].title;
                    targetBgPath = backgroundImages[pageKey];
                }
            } else {
                targetOpacity = 0.25; 
                targetFilter = 'grayscale(70%) brightness(0.7)'; 
                contentHtml = pageDescriptions[pageKey].content();
                titleText = pageDescriptions[pageKey].title;
                targetBgPath = backgroundImages[pageKey];
            }
            
            // --- 背景图控制逻辑 ---
            const currentBgUrl = bgDiv.style.backgroundImage.slice(5, -2); 
            
            if (pageKey === 'home') {
                bgDiv.style.filter = targetFilter;
                // 注意：在 cycleHomeBackground 中已处理初始 opacity 的缓慢变化
                cycleHomeBackground(); 
            } else if (bgDiv && targetBgPath && currentBgUrl !== targetBgPath) {
                bgDiv.style.opacity = 0;
                // 设置快速过渡，用于非Home页面的图片切换（0.5s）
                bgDiv.style.transition = 'opacity 0.5s ease, filter 0.5s ease'; 
                setTimeout(() => {
                    bgDiv.style.backgroundImage = `url('${targetBgPath}')`;
                    bgDiv.style.filter = targetFilter;
                    bgDiv.style.opacity = targetOpacity;
                }, 500); 
            } else if (bgDiv && targetBgPath) {
                // 如果背景路径相同，确保样式应用
                bgDiv.style.transition = 'opacity 0.5s ease, filter 0.5s ease'; 
                bgDiv.style.backgroundImage = `url('${targetBgPath}')`;
                bgDiv.style.filter = targetFilter;
                bgDiv.style.opacity = targetOpacity;
            }

            // --- 内容渲染和动画 ---
            contentDiv.classList.remove('loaded');
            setTimeout(() => {
                contentDiv.innerHTML = contentHtml;

                if (pageKey === 'works' && !subKey && projectsData.length > 0) {
                    setTimeout(() => { updateProjectPreview(projectsData[0].id); }, 100);
                }

                // 触发 reveal 动画
                setTimeout(() => {
                    document.querySelectorAll('.reveal').forEach(el => {
                        el.classList.add('active');
                        observer.observe(el);
                    });
                }, 50);

                document.title = `Cao Xinran | ${titleText}`;
                contentDiv.classList.add('loaded');
            }, 50); 

            if (!skipHistory) {
                window.history.pushState({ path: path }, titleText, `#${path}`);
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Intersection Observer for scroll-based reveal effect
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, { threshold: 0.1 });


        // Handle browser back/forward buttons
        window.addEventListener('popstate', (event) => {
            const hash = window.location.hash.substring(1);
            const path = hash || 'home';
            navigate(path, true); 
        });

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            const initialHash = window.location.hash.substring(1);
            const initialPath = initialHash || 'home';
            
            // First navigation to populate the content
            navigate(initialPath); 
        });


// ... 以上是你原有的 navigate, renderWorks 等很多 JS 代码 ...

        /* --- 把自定义弹窗函数加在这里 --- */
        function showAlert(message) {
            const alertOverlay = document.getElementById('custom-alert');
            const alertMsg = document.getElementById('alert-message');
            if (alertOverlay && alertMsg) {
                alertMsg.innerHTML = message;
                alertOverlay.classList.add('show');
                document.body.style.overflow = 'hidden'; // 防止弹出时背景还能滑动
            }
        }

        function closeAlert() {
            const alertOverlay = document.getElementById('custom-alert');
            if (alertOverlay) {
                alertOverlay.classList.remove('show');
                document.body.style.overflow = ''; // 恢复滑动
            }
        }

    </script>
</body>
</html>